{
    "version": 3,
    "file": "iRenderer.js",
    "sourceRoot": "",
    "sources": [
        "/src/store/iRenderer.ts"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import {Instance, SnapshotIn, types} from 'mobx-state-tree';\nimport {\n  extendObject,\n  createObject,\n  getVariable,\n  cloneObject,\n  setVariable,\n  deleteVariable\n} from '../utils/helper';\nimport {dataMapping} from '../utils/tpl-builtin';\nimport {SimpleMap} from '../utils/SimpleMap';\nimport {StoreNode} from './node';\n\nexport const iRendererStore = StoreNode.named('iRendererStore')\n  .props({\n    hasRemoteData: types.optional(types.boolean, false),\n    data: types.optional(types.frozen(), {}),\n    initedAt: 0, // 初始 init 的时刻\n    updatedAt: 0, // 从服务端更新时刻\n    pristine: types.optional(types.frozen(), {}),\n    action: types.optional(types.frozen(), undefined),\n    dialogOpen: false,\n    dialogData: types.optional(types.frozen(), undefined),\n    drawerOpen: false,\n    drawerData: types.optional(types.frozen(), undefined)\n  })\n  .views(self => ({\n    getValueByName(name: string, canAccessSuper: boolean = true) {\n      return getVariable(self.data, name, canAccessSuper);\n    },\n\n    getPristineValueByName(name: string) {\n      return getVariable(self.pristine, name, false);\n    }\n  }))\n  .actions(self => {\n    const dialogCallbacks = new SimpleMap<(result?: any) => void>();\n\n    return {\n      initData(data: object = {}, skipSetPristine = false) {\n        self.initedAt = Date.now();\n\n        !skipSetPristine && (self.pristine = data);\n        self.data = data;\n      },\n\n      reset() {\n        self.data = self.pristine;\n      },\n\n      updateData(data: object = {}, tag?: object, replace?: boolean) {\n        const prev = self.data;\n        let newData;\n        if (tag) {\n          let proto = createObject((self.data as any).__super || null, tag);\n          newData = createObject(proto, {\n            ...(replace ? {} : self.data),\n            ...data\n          });\n        } else {\n          newData = extendObject(self.data, data, !replace);\n        }\n\n        Object.defineProperty(newData, '__prev', {\n          value: {...prev},\n          enumerable: false,\n          configurable: false,\n          writable: false\n        });\n\n        self.data = newData;\n      },\n\n      changeValue(\n        name: string,\n        value: any,\n        changePristine?: boolean,\n        force?: boolean,\n        otherModifier?: (data: Object) => void\n      ) {\n        if (!name) {\n          return;\n        }\n\n        const origin = getVariable(self.data, name, false);\n\n        if (value === origin && !force) {\n          return;\n        }\n\n        const prev = self.data;\n        const data = cloneObject(self.data);\n        if (prev.__prev) {\n          // 基于之前的 __prev 改\n          const prevData = cloneObject(prev.__prev);\n          setVariable(prevData, name, origin);\n          Object.defineProperty(data, '__prev', {\n            value: prevData,\n            enumerable: false,\n            configurable: false,\n            writable: false\n          });\n        } else {\n          Object.defineProperty(data, '__prev', {\n            value: {...prev},\n            enumerable: false,\n            configurable: false,\n            writable: false\n          });\n        }\n\n        if (value === undefined) {\n          deleteVariable(data, name);\n        } else {\n          setVariable(data, name, value);\n        }\n\n        otherModifier?.(data);\n\n        if (changePristine) {\n          const pristine = cloneObject(self.pristine);\n          setVariable(pristine, name, value);\n          otherModifier?.(pristine);\n          self.pristine = pristine;\n        }\n\n        if (!data.__pristine) {\n          Object.defineProperty(data, '__pristine', {\n            value: self.pristine,\n            enumerable: false,\n            configurable: false,\n            writable: false\n          });\n        }\n\n        self.data = data;\n      },\n\n      setCurrentAction(action: object) {\n        self.action = action;\n      },\n\n      openDialog(ctx: any, additonal?: object, callback?: (ret: any) => void) {\n        let proto = ctx.__super ? ctx.__super : self.data;\n\n        if (additonal) {\n          proto = createObject(proto, additonal);\n        }\n\n        const data = createObject(proto, {\n          ...ctx\n        });\n\n        if (self.action.dialog && self.action.dialog.data) {\n          self.dialogData = dataMapping(self.action.dialog.data, data);\n\n          const clonedAction = {\n            ...self.action,\n            dialog: {\n              ...self.action.dialog\n            }\n          };\n          delete clonedAction.dialog.data;\n          self.action = clonedAction;\n        } else {\n          self.dialogData = data;\n        }\n        self.dialogOpen = true;\n        callback && dialogCallbacks.set(self.dialogData, callback);\n      },\n\n      closeDialog(result?: any) {\n        const callback = dialogCallbacks.get(self.dialogData);\n\n        self.dialogOpen = false;\n\n        if (callback) {\n          dialogCallbacks.delete(self.dialogData);\n          setTimeout(() => callback(result), 200);\n        }\n      },\n\n      openDrawer(ctx: any, additonal?: object, callback?: (ret: any) => void) {\n        let proto = ctx.__super ? ctx.__super : self.data;\n\n        if (additonal) {\n          proto = createObject(proto, additonal);\n        }\n\n        const data = createObject(proto, {\n          ...ctx\n        });\n\n        if (self.action.drawer.data) {\n          self.drawerData = dataMapping(self.action.drawer.data, data);\n\n          const clonedAction = {\n            ...self.action,\n            dialog: {\n              ...self.action.dialog\n            }\n          };\n          delete clonedAction.dialog.data;\n          self.action = clonedAction;\n        } else {\n          self.drawerData = data;\n        }\n        self.drawerOpen = true;\n\n        if (callback) {\n          dialogCallbacks.set(self.drawerData, callback);\n        }\n      },\n\n      closeDrawer(result?: any) {\n        const callback = dialogCallbacks.get(self.drawerData);\n        self.drawerOpen = false;\n\n        if (callback) {\n          dialogCallbacks.delete(self.drawerData);\n          setTimeout(() => callback(result), 200);\n        }\n      }\n    };\n  });\n\nexport type IIRendererStore = Instance<typeof iRendererStore>;\nexport type SIRendererStore = SnapshotIn<typeof iRendererStore>;\n// export type SIRendererStore = typeof iRendererStore.SnapshotType;\n"
    ]
}
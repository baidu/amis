{
    "version": 3,
    "file": "InputTable.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Form/InputTable.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {FormItem, FormControlProps, FormBaseControl} from './Item';\nimport Button from '../../components/Button';\nimport {\n  createObject,\n  getTree,\n  getVariable,\n  setVariable,\n  spliceTree\n} from '../../utils/helper';\nimport {RendererData, Action, Api, Payload, ApiObject} from '../../types';\nimport {isEffectiveApi} from '../../utils/api';\nimport {filter} from '../../utils/tpl';\nimport omit from 'lodash/omit';\nimport {dataMapping} from '../../utils/tpl-builtin';\nimport findIndex from 'lodash/findIndex';\nimport {SimpleMap} from '../../utils/SimpleMap';\nimport {Icon} from '../../components/icons';\nimport {TableSchema} from '../Table';\nimport {SchemaApi} from '../../Schema';\nimport find from 'lodash/find';\n\nexport interface TableControlSchema\n  extends FormBaseControl,\n    Omit<TableSchema, 'type'> {\n  type: 'input-table';\n\n  /**\n   * 可新增\n   */\n  addable?: boolean;\n\n  /**\n   * 可复制新增\n   */\n  copyable?: boolean;\n\n  /**\n   * 复制按钮文字\n   */\n  copyBtnLabel?: string;\n\n  /**\n   * 复制按钮图标\n   */\n  copyBtnIcon?: string;\n\n  /**\n   * 是否显示复制按钮\n   */\n  copyAddBtn?: boolean;\n\n  /**\n   * 是否可以拖拽排序\n   */\n  draggable?: boolean;\n\n  /**\n   * 新增 API\n   */\n  addApi?: SchemaApi;\n\n  /**\n   * 新增按钮文字\n   */\n  addBtnLabel?: string;\n\n  /**\n   * 新增按钮图标\n   */\n  addBtnIcon?: string;\n\n  /**\n   * 显示新增按钮\n   */\n  showAddBtn?: boolean;\n\n  /**\n   * 可否删除\n   */\n  removable?: boolean;\n\n  /**\n   * 删除的 API\n   */\n  deleteApi?: SchemaApi;\n\n  /**\n   * 可否编辑\n   */\n  editable?: boolean;\n\n  /**\n   * 更新按钮名称\n   */\n  editBtnLabel?: string;\n\n  /**\n   * 更新按钮图标\n   */\n  editBtnIcon?: string;\n\n  /**\n   * 确认按钮文字\n   */\n  confirmBtnLabel?: string;\n\n  /**\n   * 确认按钮图标\n   */\n  confirmBtnIcon?: string;\n\n  /**\n   * 取消按钮文字\n   */\n  cancelBtnLabel?: string;\n\n  /**\n   * 取消按钮图标\n   */\n  cancelBtnIcon?: string;\n\n  /**\n   * 删除按钮文字\n   */\n  deleteBtnLabel?: string;\n\n  /**\n   * 删除按钮图标\n   */\n  deleteBtnIcon?: string;\n\n  /**\n   * 更新 API\n   */\n  updateApi?: SchemaApi;\n\n  /**\n   * 初始值，新增的时候\n   */\n  scaffold?: any;\n\n  /**\n   * 删除确认文字\n   */\n  deleteConfirmText?: string;\n\n  /**\n   * 值字段\n   */\n  valueField?: string;\n\n  /**\n   * 是否为确认的编辑模式。\n   */\n  needConfirm?: boolean;\n\n  /**\n   * 是否可以访问父级数据，正常 combo 已经关联到数组成员，是不能访问父级数据的。\n   */\n  canAccessSuperData?: boolean;\n\n  /**\n   * 是否显示序号\n   */\n  showIndex?: boolean;\n\n  /**\n   * 分页个数，默认不分页\n   */\n  perPage?: number;\n}\n\nexport interface TableProps\n  extends FormControlProps,\n    Omit<\n      TableControlSchema,\n      'type' | 'className' | 'descriptionClassName' | 'inputClassName'\n    > {}\n\nexport interface TableState {\n  items: Array<any>;\n  raw?: any;\n  columns: Array<any>;\n  editIndex: number;\n  isCreateMode?: boolean;\n  page?: number;\n}\n\nexport default class FormTable extends React.Component<TableProps, TableState> {\n  static defaultProps = {\n    placeholder: 'placeholder.empty',\n    scaffold: {},\n    addBtnIcon: 'plus',\n    copyBtnIcon: 'copy',\n    editBtnIcon: 'pencil',\n    deleteBtnIcon: 'minus',\n    confirmBtnIcon: 'check',\n    cancelBtnIcon: 'close',\n    valueField: ''\n  };\n\n  static propsList: Array<string> = [\n    'onChange',\n    'name',\n    'columns',\n    'label',\n    'scaffold',\n    'showAddBtn',\n    'addable',\n    'removable',\n    'copyable',\n    'editable',\n    'addApi',\n    'updateApi',\n    'deleteApi',\n    'needConfirm',\n    'canAccessSuperData',\n    'formStore'\n  ];\n\n  entries: SimpleMap<any, number>;\n  entityId: number = 1;\n  subForms: any = {};\n  rowPrinstine: Array<any> = [];\n  editting: any = {};\n  constructor(props: TableProps) {\n    super(props);\n\n    this.state = {\n      columns: this.buildColumns(props),\n      editIndex: -1,\n      items: Array.isArray(props.value) ? props.value.concat() : []\n    };\n\n    this.entries = new SimpleMap();\n    this.buildItemProps = this.buildItemProps.bind(this);\n    this.confirmEdit = this.confirmEdit.bind(this);\n    this.cancelEdit = this.cancelEdit.bind(this);\n    this.handleSaveTableOrder = this.handleSaveTableOrder.bind(this);\n    this.handleTableSave = this.handleTableSave.bind(this);\n    this.getEntryId = this.getEntryId.bind(this);\n    this.subFormRef = this.subFormRef.bind(this);\n    this.handlePageChange = this.handlePageChange.bind(this);\n    this.emitValue = this.emitValue.bind(this);\n  }\n\n  componentDidUpdate(nextProps: TableProps) {\n    const props = this.props;\n    let toUpdate: any = null;\n\n    if (props.columns !== nextProps.columns) {\n      toUpdate = {\n        ...toUpdate,\n        columns: this.buildColumns(props)\n      };\n    }\n\n    if (props.value !== nextProps.value) {\n      toUpdate = {\n        ...toUpdate,\n        items: Array.isArray(props.value) ? props.value.concat() : [],\n        editIndex: -1,\n        raw: undefined\n      };\n    }\n\n    toUpdate && this.setState(toUpdate);\n  }\n\n  componentWillUnmount() {\n    this.entries.dispose();\n  }\n\n  subFormRef(form: any, x: number, y: number) {\n    this.subForms[`${x}-${y}`] = form;\n  }\n\n  async validate(): Promise<string | void> {\n    const {value, minLength, maxLength, translate: __, columns} = this.props;\n\n    // todo: 如果当前正在编辑中，表单提交了，应该先让正在编辑的东西提交然后再做验证。\n    if (~this.state.editIndex) {\n      return __('Table.editing');\n    }\n\n    if (minLength && (!Array.isArray(value) || value.length < minLength)) {\n      return __('Combo.minLength', {minLength});\n    } else if (maxLength && Array.isArray(value) && value.length > maxLength) {\n      return __('Combo.maxLength', {maxLength});\n    } else {\n      const subForms: Array<any> = [];\n      Object.keys(this.subForms).forEach(\n        key => this.subForms[key] && subForms.push(this.subForms[key])\n      );\n      if (subForms.length) {\n        const results = await Promise.all(\n          subForms.map(item => item.validate())\n        );\n\n        let msg = ~results.indexOf(false) ? __('Form.validateFailed') : '';\n        let uniqueColumn = '';\n\n        if (\n          !msg &&\n          Array.isArray(columns) &&\n          Array.isArray(value) &&\n          columns.some(item => {\n            if (item.unique && item.name) {\n              let exists: Array<any> = [];\n\n              return value.some((obj: any) => {\n                const value = getVariable(obj, item.name);\n\n                if (~exists.indexOf(value)) {\n                  uniqueColumn = `${item.label || item.name}`;\n                  return true;\n                }\n\n                exists.push(value);\n                return false;\n              });\n            }\n\n            return false;\n          })\n        ) {\n          msg = __('InputTable.uniqueError', {\n            label: uniqueColumn\n          });\n        }\n\n        return msg;\n      }\n    }\n  }\n\n  emitValue() {\n    const items = this.state.items.filter(item => !item.__isPlaceholder);\n    const {onChange} = this.props;\n    onChange?.(items);\n  }\n\n  async doAction(action: Action, ctx: RendererData, ...rest: Array<any>) {\n    const {\n      onAction,\n      valueField,\n      env,\n      onChange,\n      editable,\n      needConfirm,\n      addable,\n      addApi,\n      translate: __\n    } = this.props;\n\n    if (action.actionType === 'add') {\n      if (addable === false) {\n        return;\n      }\n\n      const items = this.state.items.concat();\n\n      if (addApi || action.payload) {\n        let toAdd = null;\n\n        if (isEffectiveApi(addApi, ctx)) {\n          const payload = await env.fetcher(addApi, ctx);\n          if (payload && !payload.ok) {\n            env.notify('error', payload.msg || __('fetchFailed'));\n            return;\n          } else if (payload && payload.ok) {\n            toAdd = payload.data;\n          }\n        } else {\n          toAdd = dataMapping(action.payload, ctx);\n        }\n\n        toAdd = Array.isArray(toAdd) ? toAdd : [toAdd];\n        toAdd.forEach((toAdd: any) => {\n          if (\n            !valueField ||\n            !find(\n              items,\n              item => item[valueField as string] == toAdd[valueField as string]\n            )\n          ) {\n            // 不要重复加入\n            items.push(toAdd);\n          }\n        });\n\n        this.setState(\n          {\n            items\n          },\n          () => {\n            this.emitValue();\n\n            if (toAdd.length === 1 && needConfirm !== false) {\n              this.startEdit(items.length - 1, true);\n            }\n          }\n        );\n\n        return;\n      } else {\n        return this.addItem(items.length - 1);\n      }\n    } else if (\n      action.actionType === 'remove' ||\n      action.actionType === 'delete'\n    ) {\n      if (!valueField) {\n        return env.alert(__('Table.valueField'));\n      } else if (!action.payload) {\n        return env.alert(__('Table.playload'));\n      }\n\n      const items = this.state.items.concat();\n      let toRemove: any = dataMapping(action.payload, ctx);\n      toRemove = Array.isArray(toRemove) ? toRemove : [toRemove];\n\n      toRemove.forEach((toRemove: any) => {\n        const idx = findIndex(\n          items,\n          item => item[valueField as string] == toRemove[valueField as string]\n        );\n        if (~idx) {\n          items.splice(idx, 1);\n        }\n      });\n\n      this.setState(\n        {\n          items\n        },\n        () => this.emitValue()\n      );\n\n      // todo 如果配置删除 Api 怎么办？\n      return;\n    }\n\n    return onAction && onAction(action, ctx, ...rest);\n  }\n\n  copyItem(index: number) {\n    const {needConfirm} = this.props;\n    const items = this.state.items.concat();\n\n    items.splice(index + 1, 0, items[index]);\n    index = Math.min(index + 1, items.length - 1);\n    this.setState(\n      {\n        items\n      },\n      () => {\n        if (needConfirm === false) {\n          this.emitValue();\n        } else {\n          this.startEdit(index, true);\n        }\n      }\n    );\n  }\n\n  addItem(index: number) {\n    const {needConfirm, scaffold, columns} = this.props;\n    const items = this.state.items.concat();\n    let value: any = {\n      __isPlaceholder: true\n    };\n\n    if (Array.isArray(columns)) {\n      columns.forEach(column => {\n        if (\n          typeof column.value !== 'undefined' &&\n          typeof column.name === 'string'\n        ) {\n          setVariable(value, column.name, column.value);\n        }\n      });\n    }\n\n    value = {\n      ...value,\n      ...scaffold\n    };\n\n    if (needConfirm === false) {\n      delete value.__isPlaceholder;\n    }\n\n    items.splice(index + 1, 0, value);\n    index = Math.min(index + 1, items.length - 1);\n\n    this.setState(\n      {\n        items\n      },\n      () => {\n        if (needConfirm === false) {\n          this.emitValue();\n        } else {\n          this.startEdit(index, true);\n        }\n      }\n    );\n  }\n\n  startEdit(index: number, isCreate: boolean = false) {\n    this.setState({\n      editIndex: index,\n      isCreateMode: isCreate,\n      raw: this.state.items[index],\n\n      columns: this.buildColumns(this.props, isCreate)\n    });\n  }\n\n  async confirmEdit() {\n    const {addApi, updateApi, data, env, translate: __} = this.props;\n\n    // form 是 lazyChange 的，先让他们 flush, 即把未提交的数据提交。\n    const subForms: Array<any> = [];\n    Object.keys(this.subForms).forEach(\n      key => this.subForms[key] && subForms.push(this.subForms[key])\n    );\n    subForms.forEach(form => form.flush());\n\n    const items = this.state.items.concat();\n    let item = {\n      ...items[this.state.editIndex]\n    };\n    const isNew = item.__isPlaceholder;\n\n    let remote: Payload | null = null;\n    if (isNew && isEffectiveApi(addApi, createObject(data, item))) {\n      remote = await env.fetcher(addApi, createObject(data, item));\n    } else if (isEffectiveApi(updateApi, createObject(data, item))) {\n      remote = await env.fetcher(updateApi, createObject(data, item));\n    }\n\n    if (remote && !remote.ok) {\n      env.notify('error', remote.msg || __('saveFailed'));\n      return;\n    } else if (remote && remote.ok) {\n      item = {\n        ...(((isNew ? addApi : updateApi) as ApiObject).replaceData\n          ? {}\n          : item),\n        ...remote.data\n      };\n    }\n\n    delete item.__isPlaceholder;\n    items.splice(this.state.editIndex, 1, item);\n\n    this.setState(\n      {\n        editIndex: -1,\n        items: items,\n        raw: undefined\n      },\n      this.emitValue\n    );\n  }\n\n  cancelEdit() {\n    let items = this.state.items.concat();\n\n    if (this.state.isCreateMode) {\n      items = items.filter(item => !item.__isPlaceholder);\n    } else if (this.state.raw) {\n      items.splice(this.state.editIndex, 1, this.state.raw);\n    }\n\n    this.setState(\n      {\n        editIndex: -1,\n        raw: undefined,\n        items: items\n      },\n      this.emitValue\n    );\n  }\n\n  async removeItem(index: number) {\n    const {\n      value,\n      onChange,\n      deleteApi,\n      deleteConfirmText,\n      env,\n      data,\n      translate: __\n    } = this.props;\n\n    let newValue = Array.isArray(value) ? value.concat() : [];\n    const item = newValue[index];\n\n    if (!item) {\n      return;\n    }\n\n    const ctx = createObject(data, item);\n    if (isEffectiveApi(deleteApi, ctx)) {\n      const confirmed = await env.confirm(\n        deleteConfirmText ? filter(deleteConfirmText, ctx) : __('deleteConfirm')\n      );\n      if (!confirmed) {\n        // 如果不确认，则跳过！\n        return;\n      }\n\n      const result = await env.fetcher(deleteApi, ctx);\n\n      if (!result.ok) {\n        env.notify('error', __('deleteFailed'));\n        return;\n      }\n    }\n\n    this.removeEntry(item);\n    newValue.splice(index, 1);\n    onChange(newValue);\n  }\n\n  buildItemProps(item: any, index: number) {\n    if (this.props.needConfirm === false) {\n      return {\n        quickEditEnabled: true\n      };\n    } else if (\n      !this.props.editable &&\n      !this.props.addable &&\n      !this.state.isCreateMode\n    ) {\n      return null;\n    }\n\n    const perPage = this.props.perPage;\n    const page = this.state.page || 1;\n    let offset = 0;\n    if (typeof perPage === 'number' && perPage) {\n      offset = (page - 1) * perPage;\n    }\n\n    return {\n      quickEditEnabled: this.state.editIndex === index + offset\n    };\n  }\n\n  buildColumns(props: TableProps, isCreateMode = false): Array<any> {\n    const env = this.props.env;\n    let columns: Array<any> = Array.isArray(props.columns)\n      ? props.columns.concat()\n      : [];\n    const ns = this.props.classPrefix;\n    const __ = this.props.translate;\n    const needConfirm = this.props.needConfirm;\n    const showIndex = this.props.showIndex;\n\n    let btns = [];\n    if (props.addable && props.showAddBtn !== false) {\n      btns.push({\n        children: ({\n          key,\n          rowIndex,\n          offset\n        }: {\n          key: any;\n          rowIndex: number;\n          offset: number;\n        }) =>\n          ~this.state.editIndex && needConfirm !== false ? null : (\n            <Button\n              classPrefix={ns}\n              size=\"sm\"\n              key={key}\n              level=\"link\"\n              tooltip={__('Table.addRow')}\n              tooltipContainer={\n                env && env.getModalContainer ? env.getModalContainer : undefined\n              }\n              onClick={this.addItem.bind(this, rowIndex + offset, undefined)}\n            >\n              {props.addBtnLabel ? <span>{props.addBtnLabel}</span> : null}\n              {props.addBtnIcon ? (\n                <Icon icon={props.addBtnIcon} className=\"icon\" />\n              ) : null}\n            </Button>\n          )\n      });\n    }\n\n    if (props.copyable && props.showCopyBtn !== false) {\n      btns.push({\n        children: ({\n          key,\n          rowIndex,\n          offset\n        }: {\n          key: any;\n          rowIndex: number;\n          offset: number;\n        }) =>\n          ~this.state.editIndex && needConfirm !== false ? null : (\n            <Button\n              classPrefix={ns}\n              size=\"sm\"\n              key={key}\n              level=\"link\"\n              tooltip={__('Table.copyRow')}\n              tooltipContainer={\n                env && env.getModalContainer ? env.getModalContainer : undefined\n              }\n              onClick={this.copyItem.bind(this, rowIndex + offset, undefined)}\n            >\n              {props.copyBtnLabel ? <span>{props.copyBtnLabel}</span> : null}\n              {props.copyBtnIcon ? (\n                <Icon icon={props.copyBtnIcon} className=\"icon\" />\n              ) : null}\n            </Button>\n          )\n      });\n    }\n\n    if (props.needConfirm === false) {\n      columns = columns.map(column => {\n        const quickEdit = column.quickEdit;\n\n        return quickEdit === false\n          ? omit(column, ['quickEdit'])\n          : {\n              ...column,\n              quickEdit: {\n                ...this.columnToQuickEdit(column),\n                ...quickEdit,\n                saveImmediately: true,\n                mode: 'inline'\n              }\n            };\n      });\n    } else if (props.addable || props.editable || isCreateMode) {\n      columns = columns.map(column => {\n        const quickEdit =\n          !isCreateMode && column.hasOwnProperty('quickEditOnUpdate')\n            ? column.quickEditOnUpdate\n            : column.quickEdit;\n\n        return quickEdit === false\n          ? omit(column, ['quickEdit'])\n          : {\n              ...column,\n              quickEdit: {\n                ...this.columnToQuickEdit(column),\n                ...quickEdit,\n                saveImmediately: true,\n                mode: 'inline'\n              }\n            };\n      });\n\n      props.editable &&\n        btns.push({\n          children: ({\n            key,\n            rowIndex,\n            data,\n            offset\n          }: {\n            key: any;\n            rowIndex: number;\n            data: any;\n            offset: number;\n          }) =>\n            ~this.state.editIndex || (data && data.__isPlaceholder) ? null : (\n              <Button\n                classPrefix={ns}\n                size=\"sm\"\n                key={key}\n                level=\"link\"\n                tooltip={__('Table.editRow')}\n                tooltipContainer={\n                  env && env.getModalContainer\n                    ? env.getModalContainer\n                    : undefined\n                }\n                onClick={() => this.startEdit(rowIndex + offset)}\n              >\n                {props.updateBtnLabel || props.editBtnLabel ? (\n                  <span>{props.updateBtnLabel || props.editBtnLabel}</span>\n                ) : null}\n                {/* 兼容之前的写法 */}\n                {typeof props.updateBtnIcon !== 'undefined' ? (\n                  props.updateBtnIcon ? (\n                    <Icon icon={props.updateBtnIcon} className=\"icon\" />\n                  ) : null\n                ) : props.editBtnIcon ? (\n                  <Icon icon={props.editBtnIcon} className=\"icon\" />\n                ) : null}\n              </Button>\n            )\n        });\n\n      btns.push({\n        children: ({\n          key,\n          rowIndex,\n          offset\n        }: {\n          key: any;\n          rowIndex: number;\n          offset: number;\n        }) =>\n          this.state.editIndex === rowIndex + offset ? (\n            <Button\n              classPrefix={ns}\n              size=\"sm\"\n              key={key}\n              level=\"link\"\n              tooltip={__('save')}\n              tooltipContainer={\n                env && env.getModalContainer ? env.getModalContainer : undefined\n              }\n              onClick={this.confirmEdit}\n            >\n              {props.confirmBtnLabel ? (\n                <span>{props.confirmBtnLabel}</span>\n              ) : null}\n              {props.confirmBtnIcon ? (\n                <Icon icon={props.confirmBtnIcon} className=\"icon\" />\n              ) : null}\n            </Button>\n          ) : null\n      });\n\n      btns.push({\n        children: ({\n          key,\n          rowIndex,\n          offset\n        }: {\n          key: any;\n          rowIndex: number;\n          offset: number;\n        }) =>\n          this.state.editIndex === rowIndex + offset ? (\n            <Button\n              classPrefix={ns}\n              size=\"sm\"\n              key={key}\n              level=\"link\"\n              tooltip={__('cancel')}\n              tooltipContainer={\n                env && env.getModalContainer ? env.getModalContainer : undefined\n              }\n              onClick={this.cancelEdit}\n            >\n              {props.cancelBtnLabel ? (\n                <span>{props.cancelBtnLabel}</span>\n              ) : null}\n              {props.cancelBtnIcon ? (\n                <Icon icon={props.cancelBtnIcon} className=\"icon\" />\n              ) : null}\n            </Button>\n          ) : null\n      });\n    }\n\n    if (props.removable) {\n      btns.push({\n        children: ({\n          key,\n          rowIndex,\n          data,\n          offset\n        }: {\n          key: any;\n          rowIndex: number;\n          data: any;\n          offset: number;\n        }) =>\n          (~this.state.editIndex || (data && data.__isPlaceholder)) &&\n          needConfirm !== false ? null : (\n            <Button\n              classPrefix={ns}\n              size=\"sm\"\n              key={key}\n              level=\"link\"\n              tooltip={__('Table.deleteRow')}\n              tooltipContainer={\n                env && env.getModalContainer ? env.getModalContainer : undefined\n              }\n              onClick={this.removeItem.bind(this, rowIndex + offset)}\n            >\n              {props.deleteBtnLabel ? (\n                <span>{props.deleteBtnLabel}</span>\n              ) : null}\n              {props.deleteBtnIcon ? (\n                <Icon icon={props.deleteBtnIcon} className=\"icon\" />\n              ) : null}\n            </Button>\n          )\n      });\n    }\n\n    if (btns.length) {\n      let operation = columns.find(item => item.type === 'operation');\n\n      if (!operation) {\n        operation = {\n          type: 'operation',\n          buttons: [],\n          label: __('Table.operation'),\n          className: 'v-middle nowrap',\n          fixed: 'right',\n          width: '1%',\n          innerClassName: 'm-n'\n        };\n        columns.push(operation);\n      }\n\n      operation.buttons = Array.isArray(operation.buttons)\n        ? operation.buttons.concat()\n        : [];\n      operation.buttons.unshift.apply(operation.buttons, btns);\n    }\n\n    if (showIndex) {\n      columns.unshift({\n        label: __('Table.index'),\n        width: '1%',\n        children: (props: any) => {\n          return <td>{props.offset + props.data.index + 1}</td>;\n        }\n      });\n    }\n\n    return columns;\n  }\n\n  columnToQuickEdit(column: any) {\n    const quickEdit: any = {\n      type: 'input-text'\n    };\n\n    if (\n      (column.type &&\n        /^input\\-|(?:select|picker|checkbox|checkboxes|editor|transfer|radios)$/i.test(\n          column.type\n        )) ||\n      ~['textarea', 'combo', 'condition-builder', 'group'].indexOf(column.type)\n    ) {\n      return {\n        ...column,\n        label: ''\n      };\n    }\n\n    return quickEdit;\n  }\n\n  handleTableSave(\n    rows: Array<object> | object,\n    diff: Array<object> | object,\n    rowIndexes: Array<string> | string\n  ) {\n    const {perPage} = this.props;\n\n    if (~this.state.editIndex) {\n      const items = this.state.items.concat();\n      const origin = items[this.state.editIndex];\n\n      if (!origin) {\n        return;\n      }\n\n      const value: any = {\n        ...rows\n      };\n      this.entries.set(value, this.entries.get(origin) || this.entityId++);\n      this.entries.delete(origin);\n      items.splice(this.state.editIndex, 1, value);\n\n      this.setState({\n        items\n      });\n      return;\n    }\n\n    const page = this.state.page;\n    let items = this.state.items.concat();\n\n    if (Array.isArray(rows)) {\n      (rowIndexes as Array<string>).forEach((rowIndex, index) => {\n        const indexes = rowIndex.split('.').map(item => parseInt(item, 10));\n\n        if (page && page > 1 && typeof perPage === 'number') {\n          indexes[0] += (page - 1) * perPage;\n        }\n        const origin = getTree(items, indexes);\n\n        const data = {\n          ...origin,\n          ...(diff as Array<object>)[index]\n        };\n\n        items = spliceTree(items, indexes, 1, data);\n      });\n    } else {\n      const indexes = (rowIndexes as string)\n        .split('.')\n        .map(item => parseInt(item, 10));\n\n      if (page && page > 1 && typeof perPage === 'number') {\n        indexes[0] += (page - 1) * perPage;\n      }\n\n      const origin = getTree(items, indexes);\n      const data = {\n        ...origin,\n        ...diff\n      };\n\n      items = spliceTree(items, indexes, 1, data);\n      this.entries.set(data, this.entries.get(origin) || this.entityId++);\n      // this.entries.delete(origin); // 反正最后都会清理的，先不删了吧。\n    }\n\n    this.setState(\n      {\n        items\n      },\n      this.emitValue\n    );\n  }\n\n  handleSaveTableOrder(moved: Array<object>, rows: Array<object>) {\n    const {onChange} = this.props;\n\n    onChange(rows.map((item: object) => ({...item})));\n  }\n\n  handlePageChange(page: number) {\n    this.setState({page});\n  }\n\n  removeEntry(entry: any) {\n    if (this.entries.has(entry)) {\n      this.entries.delete(entry);\n    }\n  }\n\n  getEntryId(entry: any) {\n    if (!this.entries.has(entry)) {\n      this.entries.set(entry, this.entityId++);\n    }\n\n    return String(this.entries.get(entry));\n  }\n\n  render() {\n    const {\n      className,\n      value,\n      showAddBtn,\n      disabled,\n      render,\n      placeholder,\n      draggable,\n      addable,\n      columnsTogglable,\n      combineNum,\n      combineFromIndex,\n      translate: __,\n      canAccessSuperData,\n      expandConfig,\n      affixRow,\n      prefixRow,\n      formInited,\n      perPage,\n      classnames: cx,\n      rowClassName,\n      rowClassNameExpr\n    } = this.props;\n\n    if (formInited === false) {\n      return null;\n    }\n\n    let items = this.state.items;\n\n    let showPager = false;\n    const page = this.state.page || 1;\n    let offset = 0;\n    let lastPage = 1;\n    if (typeof perPage === 'number' && perPage && items.length > perPage) {\n      lastPage = Math.ceil(items.length / perPage);\n      items = items.slice((page - 1) * perPage, page * perPage);\n      showPager = true;\n      offset = (page - 1) * perPage;\n    }\n\n    return (\n      <div className={cx('InputTable', className)}>\n        {render(\n          'body',\n          {\n            type: 'table',\n            placeholder: __(placeholder),\n            columns: this.state.columns,\n            affixHeader: false,\n            prefixRow,\n            affixRow\n          },\n          {\n            value: undefined,\n            saveImmediately: true,\n            disabled,\n            draggable: draggable && !~this.state.editIndex,\n            items: items,\n            getEntryId: this.getEntryId,\n            onSave: this.handleTableSave,\n            onSaveOrder: this.handleSaveTableOrder,\n            buildItemProps: this.buildItemProps,\n            quickEditFormRef: this.subFormRef,\n            columnsTogglable: columnsTogglable,\n            combineNum: combineNum,\n            combineFromIndex: combineFromIndex,\n            expandConfig,\n            canAccessSuperData,\n            reUseRow: false,\n            offset,\n            rowClassName,\n            rowClassNameExpr\n          }\n        )}\n        {(addable && showAddBtn !== false) || showPager ? (\n          <div className={cx('InputTable-toolbar')}>\n            {addable && showAddBtn !== false ? (\n              <Button\n                disabled={disabled}\n                size=\"sm\"\n                onClick={() => this.addItem(this.state.items.length)}\n              >\n                <Icon icon=\"plus\" className=\"icon\" />\n                <span>{__('add')}</span>\n              </Button>\n            ) : null}\n\n            {showPager\n              ? render(\n                  'pager',\n                  {\n                    type: 'pagination'\n                  },\n                  {\n                    activePage: page,\n                    lastPage: lastPage,\n                    onPageChange: this.handlePageChange,\n                    className: 'InputTable-pager'\n                  }\n                )\n              : null}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\n@FormItem({\n  type: 'input-table'\n})\nexport class TableControlRenderer extends FormTable {}\n"
    ]
}
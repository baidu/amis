{
    "version": 3,
    "file": "ChartRadios.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Form/ChartRadios.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {FormItem, FormControlProps} from './Item';\nimport cx from 'classnames';\nimport Radios from '../../components/Radios';\nimport {\n  OptionsControl,\n  OptionsControlProps,\n  Option,\n  FormOptionsControl\n} from './Options';\nimport {autobind, isEmpty} from '../../utils/helper';\nimport {dataMapping} from '../../utils/tpl-builtin';\nimport {Chart} from '../Chart';\n\n/**\n * 图表 Radio 单选框。\n * 文档：https://baidu.gitee.io/amis/docs/components/form/chart-radios\n */\nexport interface ChartRadiosControlSchema extends FormOptionsControl {\n  type: 'chart-radios';\n  config: any;\n  showTooltipOnHighlight?: boolean;\n  chartValueField?: string;\n}\n\nexport interface ChartRadiosProps extends OptionsControlProps {\n  placeholder?: any;\n  labelClassName?: string;\n  labelField?: string;\n  config: any;\n}\n\nexport default class ChartRadiosControl extends React.Component<\n  ChartRadiosProps,\n  any\n> {\n  highlightIndex: number = -1;\n  prevIndex: number = -1;\n  chart?: any;\n\n  @autobind\n  chartRef(chart?: any) {\n    this.chart = chart;\n\n    this.chart?.on('click', 'series', (params: any) => {\n      this.props.onToggle(this.props.options[params.dataIndex]);\n    });\n\n    // 因为会要先 setOptions 再来。\n    setTimeout(() => this.highlight());\n  }\n\n  highlight(index: number = this.highlightIndex) {\n    this.highlightIndex = index;\n\n    if (!this.chart || this.prevIndex === index) {\n      return;\n    }\n\n    if (~this.prevIndex) {\n      this.chart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n        dataIndex: this.prevIndex\n      });\n    }\n\n    if (~index) {\n      this.chart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 0,\n        dataIndex: index\n      });\n\n      // 显示 tooltip\n      if (this.props.showTooltipOnHighlight) {\n        this.chart.dispatchAction({\n          type: 'showTip',\n          seriesIndex: 0,\n          dataIndex: index\n        });\n      }\n    }\n\n    this.prevIndex = index;\n  }\n\n  compoonentDidMount() {\n    if (this.props.selectedOptions.length) {\n      this.highlight(this.props.options.indexOf(this.props.selectedOptions[0]));\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.selectedOptions.length) {\n      this.highlight(this.props.options.indexOf(this.props.selectedOptions[0]));\n    }\n  }\n\n  render() {\n    const {options, labelField, chartValueField, valueField, render} =\n      this.props;\n    const config = {\n      legend: {\n        top: 10\n      },\n      tooltip: {\n        formatter: (params: any) =>\n          `${params.name}：${\n            params.value[chartValueField || valueField || 'value']\n          }（${params.percent}%）`\n      },\n      series: [\n        {\n          type: 'pie',\n          top: 30,\n          bottom: 0\n        }\n      ],\n      ...this.props.config,\n      dataset: {\n        dimensions: [\n          labelField || 'label',\n          chartValueField || valueField || 'value'\n        ],\n        source: options\n      }\n    };\n\n    return render(\n      'chart',\n      {\n        type: 'chart'\n      },\n      {\n        config,\n        chartRef: this.chartRef\n      }\n    );\n  }\n}\n\n@OptionsControl({\n  type: 'chart-radios',\n  sizeMutable: false\n})\nexport class RadiosControlRenderer extends ChartRadiosControl {\n  static defaultProps = {\n    multiple: false\n  };\n}\n"
    ]
}
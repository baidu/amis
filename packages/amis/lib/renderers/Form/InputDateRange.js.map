{
    "version": 3,
    "file": "InputDateRange.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Form/InputDateRange.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {FormItem, FormControlProps, FormBaseControl} from './Item';\nimport cx from 'classnames';\nimport {filterDate, parseDuration} from '../../utils/tpl-builtin';\nimport 'moment/locale/zh-cn';\nimport includes from 'lodash/includes';\nimport DateRangePicker, {\n  DateRangePicker as BaseDateRangePicker\n} from '../../components/DateRangePicker';\nimport {isMobile, createObject, autobind} from '../../utils/helper';\nimport {Action} from '../../types';\n\nimport type {ShortCuts} from '../../components/DatePicker';\n\n/**\n * DateRange 日期范围控件\n * 文档：https://baidu.gitee.io/amis/docs/components/form/date-range\n */\nexport interface DateRangeControlSchema extends FormBaseControl {\n  /**\n   * 指定为日期范围控件\n   */\n  type: 'input-date-range' | 'input-datetime-range' | 'input-time-range';\n\n  /**\n   * 分割符, 因为有两个值，开始时间和结束时间，所以要有连接符。默认为英文逗号。\n   *\n   */\n  delimiter?: string;\n\n  /**\n   * 默认 `X` 即时间戳格式，用来提交的时间格式。更多格式类型请参考 moment.\n   */\n  format?: string;\n\n  /**\n   * 默认 `YYYY-MM-DD` 用来配置显示的时间格式。\n   */\n  inputFormat?: string;\n\n  /**\n   * 开启后将选中的选项 value 的值用连接符拼接起来，作为当前表单项的值。如： `value1,value2` 否则为 `[value1, value2]`\n   */\n  joinValues?: boolean;\n\n  /**\n   * 最大日期限制，支持变量 $xxx 来取值，或者用相对值如：* `-2mins` 2分钟前\\n * `+2days` 2天后\\n* `-10week` 十周前\\n可用单位： `min`、`hour`、`day`、`week`、`month`、`year`。所有单位支持复数形式。\n   */\n  maxDate?: string;\n\n  /**\n   * 最小日期限制，支持变量 $xxx 来取值，或者用相对值如：* `-2mins` 2分钟前\\n * `+2days` 2天后\\n* `-10week` 十周前\\n可用单位： `min`、`hour`、`day`、`week`、`month`、`year`。所有单位支持复数形式。\n   */\n  minDate?: string;\n\n  /**\n   * 最大跨度，比如 2days\n   */\n  maxDuration?: string;\n\n  /**\n   * 最小跨度，比如 2days\n   */\n  minDuration?: string;\n\n  /**\n   * 这里面 value 需要特殊说明一下，因为支持相对值。* `-2mins` 2分钟前\\n * `+2days` 2天后\\n* `-10week` 十周前\\n可用单位： `min`、`hour`、`day`、`week`、`month`、`year`。所有单位支持复数形式。\n   */\n  value?: any;\n\n  /**\n   * 边框模式，全边框，还是半边框，或者没边框。\n   */\n  borderMode?: 'full' | 'half' | 'none';\n\n  /**\n   * 开启后变成非弹出模式，即内联模式。\n   */\n  embed?: boolean;\n\n  /**\n   * 日期范围快捷键\n   */\n  ranges?: string | Array<ShortCuts>;\n  /**\n   * 日期范围开始时间-占位符\n   */\n  startPlaceholder?: string;\n  /**\n   * 日期范围结束时间-占位符\n   */\n  endPlaceholder?: string;\n}\n\nexport interface DateRangeProps\n  extends FormControlProps,\n    Omit<\n      DateRangeControlSchema,\n      'type' | 'className' | 'descriptionClassName' | 'inputClassName'\n    > {\n  delimiter: string;\n  format: string;\n  joinValues: boolean;\n}\n\nexport default class DateRangeControl extends React.Component<DateRangeProps> {\n  static defaultProps = {\n    format: 'X',\n    joinValues: true,\n    delimiter: ','\n  };\n\n  dateRef?: BaseDateRangePicker;\n\n  constructor(props: DateRangeProps) {\n    super(props);\n\n    const {\n      defaultValue,\n      setPrinstineValue,\n      delimiter,\n      format,\n      data,\n      value,\n      joinValues,\n      utc\n    } = props;\n\n    if (defaultValue && value === defaultValue) {\n      let arr =\n        typeof defaultValue === 'string'\n          ? defaultValue.split(delimiter)\n          : defaultValue;\n      setPrinstineValue(\n        BaseDateRangePicker.formatValue(\n          {\n            startDate: filterDate(arr[0], data, format),\n            endDate: filterDate(arr[1], data, format)\n          },\n          format,\n          joinValues,\n          delimiter,\n          utc\n        )\n      );\n    }\n  }\n\n  componentDidUpdate(prevProps: DateRangeProps) {\n    const {\n      defaultValue,\n      delimiter,\n      joinValues,\n      setPrinstineValue,\n      data,\n      utc,\n      format\n    } = this.props;\n\n    if (prevProps.defaultValue !== defaultValue) {\n      let arr =\n        typeof defaultValue === 'string'\n          ? defaultValue.split(delimiter)\n          : defaultValue;\n\n      setPrinstineValue(\n        arr\n          ? BaseDateRangePicker.formatValue(\n              {\n                startDate: filterDate(arr[0], data, format),\n                endDate: filterDate(arr[1], data, format)\n              },\n              format,\n              joinValues,\n              delimiter,\n              utc\n            )\n          : undefined\n      );\n    }\n  }\n\n  @autobind\n  getRef(ref: BaseDateRangePicker) {\n    this.dateRef = ref;\n  }\n\n  // 派发有event的事件\n  @autobind\n  dispatchEvent(eventName: string) {\n    const {dispatchEvent, data, value} = this.props;\n\n    dispatchEvent(\n      eventName,\n      createObject(data, {\n        value\n      })\n    );\n  }\n\n  // 动作\n  doAction(action: Action, data: object, throwErrors: boolean) {\n    const {resetValue} = this.props;\n\n    if (action.actionType === 'clear') {\n      this.dateRef?.clear();\n      return;\n    }\n\n    if (action.actionType === 'reset' && resetValue) {\n      this.dateRef?.reset();\n    }\n  }\n\n  // 值的变化\n  @autobind\n  async handleChange(nextValue: any) {\n    const {dispatchEvent, data} = this.props;\n    const dispatcher = dispatchEvent('change', createObject(data, {value: nextValue}));\n    if (dispatcher?.prevented) {\n      return;\n    }\n    this.props.onChange(nextValue);\n  }\n\n  render() {\n    const {\n      className,\n      classPrefix: ns,\n      defaultValue,\n      defaultData,\n      minDate,\n      maxDate,\n      minDuration,\n      maxDuration,\n      data,\n      format,\n      env,\n      useMobileUI,\n      ...rest\n    } = this.props;\n    const mobileUI = useMobileUI && isMobile();\n    const comptType = this.props?.type;\n\n    return (\n      <div\n        className={cx(\n          `${ns}DateRangeControl`,\n          {\n            'is-date': /date-/.test(comptType),\n            'is-datetime': /datetime-/.test(comptType)\n          },\n          className\n        )}\n      >\n        <DateRangePicker\n          {...rest}\n          useMobileUI={useMobileUI}\n          classPrefix={ns}\n          popOverContainer={\n            mobileUI && env && env.getModalContainer\n              ? env.getModalContainer\n              : mobileUI\n              ? undefined\n              : rest.popOverContainer\n          }\n          onRef={this.getRef}\n          data={data}\n          format={format}\n          minDate={minDate ? filterDate(minDate, data, format) : undefined}\n          maxDate={maxDate ? filterDate(maxDate, data, format) : undefined}\n          minDuration={minDuration ? parseDuration(minDuration) : undefined}\n          maxDuration={maxDuration ? parseDuration(maxDuration) : undefined}\n          onChange={this.handleChange}\n          onFocus={() => this.dispatchEvent('focus')}\n          onBlur={() => this.dispatchEvent('blur')}\n        />\n      </div>\n    );\n  }\n}\n\n@FormItem({\n  type: 'input-date-range'\n})\nexport class DateRangeControlRenderer extends DateRangeControl {\n  static defaultProps = {\n    ...DateRangeControl.defaultProps,\n    timeFormat: ''\n  };\n}\n\n@FormItem({\n  type: 'input-datetime-range',\n  sizeMutable: false\n})\nexport class DateTimeRangeControlRenderer extends DateRangeControl {\n  static defaultProps = {\n    ...DateRangeControl.defaultProps,\n    timeFormat: 'HH:mm',\n    inputFormat: 'YYYY-MM-DD HH:mm'\n  };\n}\n\n@FormItem({\n  type: 'input-time-range',\n  sizeMutable: false\n})\nexport class TimeRangeControlRenderer extends DateRangeControl {\n  static defaultProps = {\n    ...DateRangeControl.defaultProps,\n    format: 'HH:mm',\n    timeFormat: 'HH:mm',\n    inputFormat: 'HH:mm',\n    viewMode: 'time',\n    ranges: ''\n  };\n}\n"
    ]
}
{
    "version": 3,
    "file": "Images.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Images.tsx"
    ],
    "names": [],
    "mappings": ";;;;AAAA,6DAA0B;AAC1B,sCAAmD;AACnD,oCAAoC;AACpC,oDAI8B;AAC9B,4DAAiE;AACjE,0CAAuD;AA+FvD;IAAiC,4CAA4B;IAA7D;QAAA,qEAgIC;QA9GC,UAAI,GAAe,EAAE,CAAC;;IA8GxB,CAAC;IA3GC,mCAAa,GAAb,UAAc,IAAqB;QAC3B,IAAA,KAAqC,IAAI,CAAC,KAAK,EAA9C,cAAc,oBAAA,EAAE,GAAG,SAAA,EAAE,WAAW,iBAAc,CAAC;QAEtD,cAAc;YACZ,cAAc,iDAEP,IAAI,KACP,WAAW,EAAE,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,GAAG,EACzC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,CAAC;oBAC3B,GAAG,EAAE,GAAG;wBACN,CAAC,CAAC,IAAA,YAAM,EAAC,GAAG,EAAE,IAAI,EAAE,OAAO,CAAC;wBAC5B,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI;oBAChC,WAAW,EAAE,WAAW;wBACtB,CAAC,CAAC,IAAA,YAAM,EAAC,WAAW,EAAE,IAAI,EAAE,OAAO,CAAC;wBACpC,CAAC,CAAC,CAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,GAAG,KAAI,IAAA,YAAM,EAAC,GAAG,EAAE,IAAI,EAAE,OAAO,CAAC,KAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,CAAA,IAAI,IAAI;oBAClE,KAAK,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC;oBAChD,OAAO,EACL,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC;iBACpE,CAAC,EAV0B,CAU1B,CAAC,KAEL,IAAI,CAAC,KAAK,CACX,CAAC;IACN,CAAC;IAED,4BAAM,GAAN;QAAA,iBAkFC;QAjFO,IAAA,KAgBF,IAAI,CAAC,KAAK,EAfZ,SAAS,eAAA,EACT,YAAY,kBAAA,EACZ,SAAS,eAAA,EACT,UAAU,gBAAA,EACV,IAAI,UAAA,EACJ,IAAI,UAAA,EACJ,WAAW,iBAAA,EACC,EAAE,gBAAA,EACd,MAAM,YAAA,EACN,SAAS,eAAA,EACT,WAAW,iBAAA,EACX,GAAG,SAAA,EACH,WAAW,iBAAA,EACX,aAAa,mBAAA,EACb,OAAO,aACK,CAAC;QAEf,IAAI,KAAU,CAAC;QACf,IAAI,IAAS,CAAC;QAEd,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,IAAA,4BAAc,EAAC,MAAM,CAAC,EAAE;YACxD,IAAI,GAAG,IAAA,sCAAwB,EAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,SAAS,CAAC;SACrE;aAAM,IACL,KAAK,CAAC,OAAO,CAAC,CAAC,KAAK,GAAG,IAAA,qBAAY,EAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACjD,OAAO,KAAK,KAAK,QAAQ,EACzB;YACA,IAAI,GAAG,KAAK,CAAC;SACd;aAAM,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YACjC,IAAI,GAAG,OAAO,CAAC;SAChB;QAED,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;YAC5B,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SAC9B;aAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YACvC,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;SACf;QAED,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QAEjB,OAAO,CACL,uCAAK,SAAS,EAAE,EAAE,CAAC,aAAa,EAAE,SAAS,CAAC,IACzC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CACrB,uCAAK,SAAS,EAAE,EAAE,CAAC,QAAQ,EAAE,aAAa,CAAC,IACxC,IAAI,CAAC,GAAG,CAAC,UAAC,IAAS,EAAE,KAAa,IAAK,OAAA,CACtC,8BAAC,eAAK,IACJ,KAAK,EAAE,KAAK,EACZ,SAAS,EAAE,EAAE,CAAC,aAAa,CAAC,EAC5B,GAAG,EAAE,KAAK,EACV,GAAG,EACD,CAAC,GAAG,CAAC,CAAC,CAAC,IAAA,YAAM,EAAC,GAAG,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC;gBACvD,IAAI,EAEN,WAAW,EACT,CAAC,WAAW;gBACV,CAAC,CAAC,IAAA,YAAM,EAAC,WAAW,EAAE,IAAI,EAAE,OAAO,CAAC;gBACpC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,EAE/B,KAAK,EAAE,IAAI,IAAI,IAAI,CAAC,KAAK,EACzB,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,EACnD,SAAS,EAAE,SAAS,EACpB,UAAU,EAAE,UAAU,EACtB,WAAW,EAAE,WAAY,EACzB,SAAS,EAAE,KAAI,CAAC,aAAa,GAC7B,CACH,EArBuC,CAqBvC,CAAC,CACE,CACP,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CACjB,uCAAK,SAAS,EAAE,EAAE,CAAC,QAAQ,EAAE,aAAa,CAAC;YACzC,8BAAC,eAAK,IACJ,SAAS,EAAE,EAAE,CAAC,aAAa,CAAC,EAC5B,GAAG,EAAE,YAAY,EACjB,SAAS,EAAE,SAAS,EACpB,UAAU,EAAE,UAAU,GACtB,CACE,CACP,CAAC,CAAC,CAAC,CACF,WAAW,CACZ,CACG,CACP,CAAC;IACJ,CAAC;;IA9HM,wBAAY,GAQf;QACF,SAAS,EAAE,EAAE;QACb,SAAS,EAAE,GAAG;QACd,YAAY,EAAE,wBAAgB;QAC9B,UAAU,EAAE,GAAG;QACf,SAAS,EAAE,SAAS;QACpB,UAAU,EAAE,KAAK;KAClB,CAAC;IAKF;QADC,iBAAQ;;0EACW,uBAAe,oBAAf,uBAAe;;oDAsBlC;IAqFH,kBAAC;CAAA,AAhID,CAAiC,eAAK,CAAC,SAAS,GAgI/C;AAhIY,kCAAW;AAqIxB;IAAyC,oDAAW;IAApD;;IAAsD,CAAC;IAA1C,mBAAmB;QAH/B,IAAA,kBAAQ,EAAC;YACR,IAAI,EAAE,QAAQ;SACf,CAAC;OACW,mBAAmB,CAAuB;IAAD,0BAAC;CAAA,AAAvD,CAAyC,WAAW,GAAG;AAA1C,kDAAmB",
    "sourcesContent": [
        "import React from 'react';\nimport {Renderer, RendererProps} from '../factory';\nimport {filter} from '../utils/tpl';\nimport {\n  resolveVariable,\n  isPureVariable,\n  resolveVariableAndFilter\n} from '../utils/tpl-builtin';\nimport Image, {ImageThumbProps, imagePlaceholder} from './Image';\nimport {autobind, getPropValue} from '../utils/helper';\nimport {BaseSchema, SchemaClassName, SchemaUrlPath} from '../Schema';\n\n/**\n * 图片集展示控件。\n * 文档：https://baidu.gitee.io/amis/docs/components/images\n */\nexport interface ImagesSchema extends BaseSchema {\n  /**\n   * 指定为图片集渲染器\n   */\n  type: 'images' | 'static-images';\n\n  /**\n   * 默认图片地址\n   */\n  defaultImage?: SchemaUrlPath;\n\n  /**\n   * 列表为空时显示\n   */\n  placeholder?: string;\n\n  /**\n   * 配置值的连接符\n   * @default ,\n   */\n  delimiter?: string;\n\n  /**\n   * 预览图模式\n   */\n  thumbMode?: 'w-full' | 'h-full' | 'contain' | 'cover';\n\n  /**\n   * 预览图比率\n   */\n  thumbRatio?: '1:1' | '4:3' | '16:9';\n\n  /**\n   * 关联字段名，也可以直接配置 src\n   */\n  name?: string;\n\n  value?: any; // todo 补充 description\n  source?: string;\n\n  // 静态配置，如果不相关联数据，而是直接固定列表展示，请配置。\n  options?: Array<any>;\n\n  /**\n   * 图片地址，默认读取数据中的 image 属性，如果不是请配置 ,如  ${imageUrl}\n   */\n  src?: string;\n\n  /**\n   * 大图地址，不设置用 src 属性，如果不是请配置，如：${imageOriginUrl}\n   */\n  originalSrc?: string; // 原图\n\n  /**\n   * 是否启动放大功能。\n   */\n  enlargeAble?: boolean;\n\n  /**\n   * 是否显示尺寸。\n   */\n  showDimensions?: boolean;\n\n  /**\n   * 外层 CSS 类名\n   */\n  className?: SchemaClassName;\n\n  /**\n   * 列表 CSS 类名\n   */\n  listClassName?: SchemaClassName;\n}\n\nexport interface ImagesProps\n  extends RendererProps,\n    Omit<ImagesSchema, 'type' | 'className'> {\n  delimiter: string;\n\n  onEnlarge?: (\n    info: ImageThumbProps & {\n      list?: Array<\n        Pick<ImageThumbProps, 'src' | 'originalSrc' | 'title' | 'caption'>\n      >;\n    }\n  ) => void;\n}\n\nexport class ImagesField extends React.Component<ImagesProps> {\n  static defaultProps: Pick<\n    ImagesProps,\n    | 'className'\n    | 'delimiter'\n    | 'defaultImage'\n    | 'placehoder'\n    | 'thumbMode'\n    | 'thumbRatio'\n  > = {\n    className: '',\n    delimiter: ',',\n    defaultImage: imagePlaceholder,\n    placehoder: '-',\n    thumbMode: 'contain',\n    thumbRatio: '1:1'\n  };\n\n  list: Array<any> = [];\n\n  @autobind\n  handleEnlarge(info: ImageThumbProps) {\n    const {onImageEnlarge, src, originalSrc} = this.props;\n\n    onImageEnlarge &&\n      onImageEnlarge(\n        {\n          ...info,\n          originalSrc: info.originalSrc || info.src,\n          list: this.list.map(item => ({\n            src: src\n              ? filter(src, item, '| raw')\n              : (item && item.image) || item,\n            originalSrc: originalSrc\n              ? filter(originalSrc, item, '| raw')\n              : item?.src || filter(src, item, '| raw') || item?.image || item,\n            title: item && (item.enlargeTitle || item.title),\n            caption:\n              item && (item.enlargeCaption || item.description || item.caption)\n          }))\n        },\n        this.props\n      );\n  }\n\n  render() {\n    const {\n      className,\n      defaultImage,\n      thumbMode,\n      thumbRatio,\n      data,\n      name,\n      placeholder,\n      classnames: cx,\n      source,\n      delimiter,\n      enlargeAble,\n      src,\n      originalSrc,\n      listClassName,\n      options\n    } = this.props;\n\n    let value: any;\n    let list: any;\n\n    if (typeof source === 'string' && isPureVariable(source)) {\n      list = resolveVariableAndFilter(source, data, '| raw') || undefined;\n    } else if (\n      Array.isArray((value = getPropValue(this.props))) ||\n      typeof value === 'string'\n    ) {\n      list = value;\n    } else if (Array.isArray(options)) {\n      list = options;\n    }\n\n    if (typeof list === 'string') {\n      list = list.split(delimiter);\n    } else if (list && !Array.isArray(list)) {\n      list = [list];\n    }\n\n    this.list = list;\n\n    return (\n      <div className={cx('ImagesField', className)}>\n        {Array.isArray(list) ? (\n          <div className={cx('Images', listClassName)}>\n            {list.map((item: any, index: number) => (\n              <Image\n                index={index}\n                className={cx('Images-item')}\n                key={index}\n                src={\n                  (src ? filter(src, item, '| raw') : item && item.image) ||\n                  item\n                }\n                originalSrc={\n                  (originalSrc\n                    ? filter(originalSrc, item, '| raw')\n                    : item && item.src) || item\n                }\n                title={item && item.title}\n                caption={item && (item.description || item.caption)}\n                thumbMode={thumbMode}\n                thumbRatio={thumbRatio}\n                enlargeAble={enlargeAble!}\n                onEnlarge={this.handleEnlarge}\n              />\n            ))}\n          </div>\n        ) : defaultImage ? (\n          <div className={cx('Images', listClassName)}>\n            <Image\n              className={cx('Images-item')}\n              src={defaultImage}\n              thumbMode={thumbMode}\n              thumbRatio={thumbRatio}\n            />\n          </div>\n        ) : (\n          placeholder\n        )}\n      </div>\n    );\n  }\n}\n\n@Renderer({\n  type: 'images'\n})\nexport class ImagesFieldRenderer extends ImagesField {}\n"
    ]
}
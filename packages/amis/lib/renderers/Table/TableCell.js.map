{
    "version": 3,
    "file": "TableCell.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Table/TableCell.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {RendererProps, Renderer} from '../../factory';\nimport QuickEdit from '../QuickEdit';\nimport Copyable from '../Copyable';\nimport PopOverable from '../PopOver';\nimport {observer} from 'mobx-react';\nimport omit = require('lodash/omit');\nimport {filter} from '../../utils/tpl';\nimport {Badge} from '../../components/Badge';\nimport ColorScale from '../../utils/ColorScale';\nimport {\n  isPureVariable,\n  resolveVariableAndFilter\n} from '../../utils/tpl-builtin';\n\nexport interface TableCellProps extends RendererProps {\n  wrapperComponent?: React.ReactType;\n  column: object;\n}\n\nexport class TableCell extends React.Component<RendererProps> {\n  static defaultProps = {\n    wrapperComponent: 'td'\n  };\n\n  static propsList: Array<string> = [\n    'type',\n    'label',\n    'column',\n    'body',\n    'tpl',\n    'rowSpan',\n    'remark'\n  ];\n\n  render() {\n    let {\n      classnames: cx,\n      className,\n      classNameExpr,\n      render,\n      style = {},\n      wrapperComponent: Component,\n      column,\n      value,\n      data,\n      children,\n      width,\n      align,\n      innerClassName,\n      label,\n      tabIndex,\n      onKeyUp,\n      rowSpan,\n      body: _body,\n      tpl,\n      remark,\n      prefix,\n      affix,\n      isHead,\n      colIndex,\n      row,\n      showBadge,\n      itemBadge,\n      ...rest\n    } = this.props;\n    const schema = {\n      ...column,\n      className: innerClassName,\n      type: (column && column.type) || 'plain'\n    };\n\n    // 如果本来就是 type 为 button，不要删除，其他情况下都应该删除。\n    if (schema.type !== 'button' && schema.type !== 'dropdown-button') {\n      delete schema.label;\n    }\n\n    let body = children\n      ? children\n      : render('field', schema, {\n          ...omit(rest, Object.keys(schema)),\n          inputOnly: true,\n          value,\n          data\n        });\n\n    if (width) {\n      style = {\n        ...style,\n        width: (style && style.width) || width\n      };\n\n      if (!/%$/.test(String(style.width))) {\n        body = (\n          <div style={{width: style.width}}>\n            {prefix}\n            {body}\n            {affix}\n          </div>\n        );\n        prefix = null;\n        affix = null;\n        // delete style.width;\n      }\n    }\n\n    if (align) {\n      style = {\n        ...style,\n        textAlign: align\n      };\n    }\n\n    if (column.backgroundScale) {\n      const backgroundScale = column.backgroundScale;\n      let min = backgroundScale.min;\n      let max = backgroundScale.max;\n\n      if (isPureVariable(min)) {\n        min = resolveVariableAndFilter(min, data, '| raw');\n      }\n      if (isPureVariable(max)) {\n        max = resolveVariableAndFilter(max, data, '| raw');\n      }\n\n      if (typeof min === 'undefined') {\n        min = Math.min(...data.rows.map((r: any) => r[column.name]));\n      }\n      if (typeof max === 'undefined') {\n        max = Math.max(...data.rows.map((r: any) => r[column.name]));\n      }\n\n      const colorScale = new ColorScale(\n        min,\n        max,\n        backgroundScale.colors || ['#FFEF9C', '#FF7127']\n      );\n      let value = data[column.name];\n      if (isPureVariable(backgroundScale.source)) {\n        value = resolveVariableAndFilter(backgroundScale.source, data, '| raw');\n      }\n\n      const color = colorScale.getColor(Number(value)).toHexString();\n      style.background = color;\n    }\n\n    if (!Component) {\n      return body as JSX.Element;\n    }\n\n    if (isHead) {\n      Component = 'th';\n    }\n\n    return (\n      <Component\n        rowSpan={rowSpan > 1 ? rowSpan : undefined}\n        style={style}\n        className={cx(\n          className,\n          column.classNameExpr ? filter(column.classNameExpr, data) : null\n        )}\n        tabIndex={tabIndex}\n        onKeyUp={onKeyUp}\n      >\n        {showBadge ? (\n          <Badge\n            classnames={cx}\n            badge={{\n              ...itemBadge,\n              className: cx(`Table-badge`, itemBadge?.className)\n            }}\n            data={row.data}\n          />\n        ) : null}\n        {prefix}\n        {body}\n        {affix}\n      </Component>\n    );\n  }\n}\n\n@Renderer({\n  test: /(^|\\/)table\\/(?:.*\\/)?cell$/,\n  name: 'table-cell'\n})\n@QuickEdit()\n@PopOverable({\n  targetOutter: true\n})\n@Copyable()\n@observer\nexport class TableCellRenderer extends TableCell {\n  static propsList = [\n    'quickEdit',\n    'quickEditEnabledOn',\n    'popOver',\n    'copyable',\n    'inline',\n    ...TableCell.propsList\n  ];\n}\n\n@Renderer({\n  type: 'field',\n  name: 'field'\n})\n@PopOverable()\n@Copyable()\nexport class FieldRenderer extends TableCell {\n  static defaultProps = {\n    ...TableCell.defaultProps,\n    wrapperComponent: 'div'\n  };\n}\n"
    ]
}
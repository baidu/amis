{
    "version": 3,
    "file": "HeadCellSearchDropdown.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Table/HeadCellSearchDropdown.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {RendererProps} from '../../factory';\nimport {Action} from '../../types';\nimport {Icon} from '../../components/icons';\nimport Overlay from '../../components/Overlay';\nimport {findDOMNode} from 'react-dom';\nimport PopOver from '../../components/PopOver';\nimport {ITableStore} from '../../store/table';\nimport {setVariable} from '../../utils/helper';\n\nexport interface QuickSearchConfig {\n  type?: string;\n  controls?: any;\n  tabs?: any;\n  fieldSet?: any;\n  [propName: string]: any;\n}\n\nexport interface HeadCellSearchProps extends RendererProps {\n  name: string;\n  searchable: boolean | QuickSearchConfig;\n  classPrefix: string;\n  onQuery: (values: object) => void;\n}\n\nexport class HeadCellSearchDropDown extends React.Component<\n  HeadCellSearchProps,\n  any\n> {\n  state = {\n    isOpened: false\n  };\n\n  formItems: Array<string> = [];\n  constructor(props: HeadCellSearchProps) {\n    super(props);\n\n    this.open = this.open.bind(this);\n    this.close = this.close.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleAction = this.handleAction.bind(this);\n  }\n\n  buildSchema() {\n    const {searchable, sortable, name, label, translate: __} = this.props;\n\n    let schema: any;\n\n    if (searchable === true) {\n      schema = {\n        title: '',\n        controls: [\n          {\n            type: 'text',\n            name,\n            placeholder: label,\n            clearable: true\n          }\n        ]\n      };\n    } else if (searchable) {\n      if (searchable.controls || searchable.tabs || searchable.fieldSet) {\n        schema = {\n          title: '',\n          ...searchable,\n          controls: Array.isArray(searchable.controls)\n            ? searchable.controls.concat()\n            : undefined\n        };\n      } else {\n        schema = {\n          title: '',\n          className: searchable.formClassName,\n          controls: [\n            {\n              type: searchable.type || 'text',\n              name: searchable.name || name,\n              placeholder: label,\n              ...searchable\n            }\n          ]\n        };\n      }\n    }\n\n    if (schema && schema.controls && sortable) {\n      schema.controls.unshift(\n        {\n          type: 'hidden',\n          name: 'orderBy',\n          value: name\n        },\n        {\n          type: 'button-group',\n          name: 'orderDir',\n          label: __('sort'),\n          options: [\n            {\n              label: __('asc'),\n              value: 'asc'\n            },\n            {\n              label: __('desc'),\n              value: 'desc'\n            }\n          ]\n        }\n      );\n    }\n\n    if (schema) {\n      const formItems: Array<string> = [];\n      schema.controls?.forEach(\n        (item: any) =>\n          item.name &&\n          item.name !== 'orderBy' &&\n          item.name !== 'orderDir' &&\n          formItems.push(item.name)\n      );\n      this.formItems = formItems;\n      schema = {\n        ...schema,\n        type: 'form',\n        wrapperComponent: 'div',\n        actions: [\n          {\n            type: 'button',\n            label: __('reset'),\n            actionType: 'clear-and-submit'\n          },\n\n          {\n            type: 'button',\n            label: __('cancel'),\n            actionType: 'cancel'\n          },\n\n          {\n            label: __('search'),\n            type: 'submit',\n            primary: true\n          }\n        ]\n      };\n    }\n\n    return schema || 'error';\n  }\n\n  handleClickOutside() {\n    this.close();\n  }\n\n  open() {\n    this.setState({\n      isOpened: true\n    });\n  }\n\n  close() {\n    this.setState({\n      isOpened: false\n    });\n  }\n\n  handleAction(e: any, action: Action, ctx: object) {\n    const {onAction} = this.props;\n\n    if (action.actionType === 'cancel' || action.actionType === 'close') {\n      this.close();\n      return;\n    }\n\n    if (action.actionType === 'reset') {\n      this.close();\n      this.handleReset();\n      return;\n    }\n\n    onAction && onAction(e, action, ctx);\n  }\n\n  handleReset() {\n    const {onQuery, data, name} = this.props;\n    const values = {...data};\n    this.formItems.forEach(key => setVariable(values, key, undefined));\n\n    if (values.orderBy === name) {\n      values.orderBy = '';\n      values.orderDir = 'asc';\n    }\n    onQuery(values);\n  }\n\n  handleSubmit(values: any) {\n    const {onQuery, name} = this.props;\n\n    this.close();\n\n    if (values.orderDir) {\n      values = {\n        ...values,\n        orderBy: name\n      };\n    }\n\n    onQuery(values);\n  }\n\n  isActive() {\n    const {data, name, orderBy} = this.props;\n\n    return orderBy === name || this.formItems.some(key => data?.[key]);\n  }\n\n  render() {\n    const {\n      render,\n      name,\n      data,\n      searchable,\n      store,\n      orderBy,\n      popOverContainer,\n      classPrefix: ns,\n      classnames: cx\n    } = this.props;\n\n    const formSchema = this.buildSchema();\n    const isActive = this.isActive();\n\n    return (\n      <span\n        className={cx(`${ns}TableCell-searchBtn`, isActive ? 'is-active' : '')}\n      >\n        <span onClick={this.open}>\n          <Icon icon=\"search\" className=\"icon\" />\n        </span>\n        {this.state.isOpened ? (\n          <Overlay\n            container={popOverContainer || (() => findDOMNode(this))}\n            placement=\"left-bottom-left-top right-bottom-right-top\"\n            target={\n              popOverContainer ? () => findDOMNode(this)!.parentNode : null\n            }\n            show\n          >\n            <PopOver\n              classPrefix={ns}\n              onHide={this.close}\n              className={cx(\n                `${ns}TableCell-searchPopOver`,\n                (searchable as any).className\n              )}\n              overlay\n            >\n              {\n                render('quick-search-form', formSchema, {\n                  data: {\n                    ...data,\n                    orderBy: orderBy,\n                    orderDir:\n                      orderBy === name ? (store as ITableStore).orderDir : ''\n                  },\n                  onSubmit: this.handleSubmit,\n                  onAction: this.handleAction\n                }) as JSX.Element\n              }\n            </PopOver>\n          </Overlay>\n        ) : null}\n      </span>\n    );\n  }\n}\n"
    ]
}
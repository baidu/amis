{
    "version": 3,
    "file": "Date.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Date.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {Renderer, RendererProps} from '../factory';\nimport moment from 'moment';\nimport {BaseSchema} from '../Schema';\nimport {getPropValue} from '../utils/helper';\n\n/**\n * Date 展示渲染器。\n * 文档：https://baidu.gitee.io/amis/docs/components/date\n */\nexport interface DateSchema extends BaseSchema {\n  /**\n   * 指定为日期展示类型\n   */\n  type:\n    | 'date'\n    | 'datetime'\n    | 'time'\n    | 'static-date'\n    | 'static-datetime'\n    | 'static-time';\n\n  /**\n   * 展示的时间格式，参考 moment 中的格式说明。\n   */\n  format?: string;\n\n  /**\n   * 占位符\n   */\n  placeholder?: string;\n\n  /**\n   * 值的时间格式，参考 moment 中的格式说明。\n   */\n  valueFormat?: string;\n\n  /**\n   * 显示成相对时间，比如1分钟前\n   */\n  fromNow?: boolean;\n\n  /**\n   * 更新频率， 默认为1分钟\n   */\n  updateFrequency?: number;\n}\n\nexport interface DateProps\n  extends RendererProps,\n    Omit<DateSchema, 'type' | 'className'> {}\n\nexport interface DateState {\n  random?: number;\n}\n\nexport class DateField extends React.Component<DateProps, DateState> {\n  refreshInterval: ReturnType<typeof setTimeout>;\n\n  static defaultProps: Pick<\n    DateProps,\n    'placeholder' | 'format' | 'valueFormat' | 'fromNow' | 'updateFrequency'\n  > = {\n    placeholder: '-',\n    format: 'YYYY-MM-DD',\n    valueFormat: 'X',\n    fromNow: false,\n    updateFrequency: 60000\n  };\n\n  // 动态显示相对时间时，用来触发视图更新\n  state: DateState = {\n    random: 0\n  };\n\n  componentDidMount() {\n    const {fromNow, updateFrequency} = this.props;\n\n    if (fromNow && updateFrequency) {\n      this.refreshInterval = setInterval(() => {\n        this.setState({\n          random: Math.random()\n        });\n      }, updateFrequency);\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.refreshInterval);\n  }\n\n  render() {\n    const {\n      valueFormat,\n      format,\n      placeholder,\n      fromNow,\n      className,\n      classnames: cx,\n      translate: __\n    } = this.props;\n    let viewValue: React.ReactNode = (\n      <span className=\"text-muted\">{placeholder}</span>\n    );\n\n    const value = getPropValue(this.props);\n\n    // 主要是给 fromNow 用的\n    let date;\n    if (value) {\n      let ISODate = moment(value, moment.ISO_8601);\n      let NormalDate = moment(value, valueFormat);\n\n      viewValue = ISODate.isValid()\n        ? ISODate.format(format)\n        : NormalDate.isValid()\n        ? NormalDate.format(format)\n        : false;\n\n      if (viewValue) {\n        date = viewValue as string;\n      }\n    }\n\n    if (fromNow) {\n      viewValue = moment(viewValue as string).fromNow();\n    }\n\n    viewValue = !viewValue ? (\n      <span className=\"text-danger\">{__('Date.invalid')}</span>\n    ) : (\n      viewValue\n    );\n\n    return (\n      <span\n        className={cx('DateField', className)}\n        title={fromNow ? date : undefined}\n      >\n        {viewValue}\n      </span>\n    );\n  }\n}\n\n@Renderer({\n  type: 'date'\n})\nexport class DateFieldRenderer extends DateField {\n  static defaultProps: Partial<DateProps> = {\n    ...DateField.defaultProps,\n    format: 'YYYY-MM-DD'\n  };\n}\n\n@Renderer({\n  type: 'datetime'\n})\nexport class DateTimeFieldRenderer extends DateField {\n  static defaultProps: Partial<DateProps> = {\n    ...DateField.defaultProps,\n    format: 'YYYY-MM-DD HH:mm:ss'\n  };\n}\n\n@Renderer({\n  type: 'time'\n})\nexport class TimeFieldRenderer extends DateField {\n  static defaultProps: Partial<DateProps> = {\n    ...DateField.defaultProps,\n    format: 'HH:mm'\n  };\n}\n@Renderer({\n  type: 'month'\n})\nexport class MonthFieldRenderer extends DateField {\n  static defaultProps: Partial<DateProps> = {\n    ...DateField.defaultProps,\n    format: 'YYYY-MM'\n  };\n}\n"
    ]
}
{
    "version": 3,
    "file": "Markdown.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Markdown.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "/**\n * @file 用来渲染 Markdown\n */\nimport React from 'react';\nimport {Renderer, RendererProps} from '../factory';\nimport {BaseSchema} from '../Schema';\nimport {isPureVariable, resolveVariableAndFilter} from '../utils/tpl-builtin';\nimport LazyComponent from '../components/LazyComponent';\nimport {getPropValue} from '../utils/helper';\nimport {isApiOutdated, isEffectiveApi} from '../utils/api';\n\n/**\n * Markdown 渲染\n * 文档：https://baidu.gitee.io/amis/docs/components/markdown\n */\nexport interface MarkdownSchema extends BaseSchema {\n  /**\n   * markdown 渲染\n   */\n  type: 'markdown';\n\n  /**\n   * markdown 内容\n   */\n  value?: string;\n\n  /**\n   * 样式类\n   */\n  className?: string;\n\n  /**\n   * 名字映射\n   */\n  name?: string;\n}\n\nfunction loadComponent(): Promise<any> {\n  return import('../components/Markdown').then(item => item.default);\n}\n\nexport interface MarkdownProps\n  extends RendererProps,\n    Omit<MarkdownSchema, 'type' | 'className'> {}\n\ninterface MarkdownState {\n  content: string;\n}\n\nexport class Markdown extends React.Component<MarkdownProps, MarkdownState> {\n  constructor(props: MarkdownProps) {\n    super(props);\n    const {name, data, src} = this.props;\n    if (src) {\n      this.state = {content: ''};\n      this.updateContent();\n    } else {\n      const content =\n        getPropValue(this.props) ||\n        (name && isPureVariable(name)\n          ? resolveVariableAndFilter(name, data, '| raw')\n          : null);\n      this.state = {content};\n    }\n  }\n\n  componentDidUpdate(prevProps: MarkdownProps) {\n    const props = this.props;\n    if (props.src) {\n      if (isApiOutdated(prevProps.src, props.src, prevProps.data, props.data)) {\n        this.updateContent();\n      }\n    } else {\n      this.updateContent();\n    }\n  }\n\n  async updateContent() {\n    const {name, data, src, env} = this.props;\n    if (src && isEffectiveApi(src, data)) {\n      const ret = await env.fetcher(src, data);\n      if (typeof ret === 'string') {\n        this.setState({content: ret});\n      } else if (typeof ret === 'object' && ret.data) {\n        this.setState({content: ret.data});\n      } else {\n        console.error('markdown response error', ret);\n      }\n    } else {\n      const content =\n        getPropValue(this.props) ||\n        (name && isPureVariable(name)\n          ? resolveVariableAndFilter(name, data, '| raw')\n          : null);\n      if (content !== this.state.content) {\n        this.setState({content});\n      }\n    }\n  }\n\n  render() {\n    const {className, classnames: cx, options} = this.props;\n\n    return (\n      <div className={cx('Markdown', className)}>\n        <LazyComponent\n          getComponent={loadComponent}\n          content={this.state.content || ''}\n          options={options}\n        />\n      </div>\n    );\n  }\n}\n\n@Renderer({\n  type: 'markdown'\n})\nexport class MarkdownRenderer extends Markdown {}\n"
    ]
}
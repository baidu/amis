{
    "version": 3,
    "file": "Common.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/schema-editor/Common.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {LocaleProps} from '../../locale';\nimport {ThemeProps} from '../../theme';\nimport type {JSONSchema} from '../../utils/DataScope';\nimport {autobind} from '../../utils/helper';\nimport Button from '../Button';\nimport Checkbox from '../Checkbox';\nimport Form from '../Form';\nimport FormField, {Controller} from '../FormField';\nimport {Icon} from '../icons';\nimport InputBox from '../InputBox';\nimport PickerContainer from '../PickerContainer';\nimport Select from '../Select';\nimport Textarea from '../Textarea';\n\nexport interface SchemaEditorItemCommonProps extends LocaleProps, ThemeProps {\n  value?: JSONSchema;\n  onChange: (value: JSONSchema) => void;\n  types: Array<{\n    label: string;\n    value: string;\n    [propName: string]: any;\n  }>;\n  onTypeChange?: (\n    type: string,\n    value: JSONSchema,\n    origin?: JSONSchema\n  ) => JSONSchema | void;\n  disabled?: boolean;\n  required?: boolean;\n  onRequiredChange?: (value: boolean) => void;\n  typeMutable?: boolean;\n  showInfo?: boolean;\n  renderExtraProps?: (\n    value: JSONSchema,\n    onChange: (value: JSONSchema) => void\n  ) => JSX.Element;\n  renderModalProps?: (\n    value: JSONSchema,\n    onChange: (value: JSONSchema) => void\n  ) => JSX.Element;\n  prefix?: JSX.Element;\n  affix?: JSX.Element;\n  enableAdvancedSetting?: boolean;\n}\n\nexport class SchemaEditorItemCommon<\n  P extends SchemaEditorItemCommonProps = SchemaEditorItemCommonProps,\n  S = any\n> extends React.Component<P, S> {\n  @autobind\n  handleTypeChange(type: any) {\n    const {value, onChange, onTypeChange} = this.props;\n    let newValue: any = {\n      type,\n      title: value?.title\n    };\n\n    newValue = onTypeChange?.(type, newValue, value) ?? newValue;\n    onChange?.(newValue);\n  }\n\n  @autobind\n  handlePropsChange(newValue: JSONSchema) {\n    const {onChange, value} = this.props;\n    onChange?.({\n      ...value,\n      ...newValue\n    });\n  }\n\n  @autobind\n  handleBeforeSubmit(form: any) {\n    return form.submit();\n  }\n\n  renderCommon() {\n    const {\n      value,\n      translate: __,\n      typeMutable,\n      disabled,\n      classnames: cx,\n      required,\n      onRequiredChange,\n      renderExtraProps,\n      renderModalProps,\n      enableAdvancedSetting,\n      prefix,\n      affix,\n      types\n    } = this.props;\n\n    return (\n      <>\n        {prefix}\n\n        {types.length > 1 ? (\n          <Select\n            options={types}\n            className={cx('SchemaEditor-type')}\n            value={value?.$ref || value?.type || 'string'}\n            onChange={this.handleTypeChange}\n            clearable={false}\n            disabled={disabled || typeMutable === false}\n            simpleValue\n          />\n        ) : null}\n\n        {onRequiredChange ? (\n          <Checkbox\n            className={cx('SchemaEditor-required')}\n            label={__('Required')}\n            value={required}\n            onChange={onRequiredChange}\n            disabled={disabled || typeMutable === false}\n          />\n        ) : null}\n\n        {renderExtraProps?.(value!, this.handlePropsChange)}\n\n        {enableAdvancedSetting ? (\n          <PickerContainer\n            value={value}\n            bodyRender={({isOpened, value, onChange, ref}) => {\n              return isOpened ? (\n                <Form defaultValues={value} onSubmit={onChange} ref={ref}>\n                  {({control, getValues, setValue}) => (\n                    <>\n                      <Controller\n                        label={__('JSONSchema.title')}\n                        name=\"title\"\n                        control={control}\n                        rules={{maxLength: 20}}\n                        isRequired\n                        render={({field}) => (\n                          <InputBox {...field} disabled={disabled} />\n                        )}\n                      />\n\n                      <Controller\n                        label={__('JSONSchema.description')}\n                        name=\"description\"\n                        control={control}\n                        render={({field}) => (\n                          <Textarea {...field} disabled={disabled} />\n                        )}\n                      />\n\n                      <Controller\n                        label={__('JSONSchema.default')}\n                        name=\"default\"\n                        control={control}\n                        render={({field}) => (\n                          <InputBox {...field} disabled={disabled} />\n                        )}\n                      />\n\n                      {renderModalProps?.(getValues(), (values: any) => {\n                        Object.keys(values).forEach(key =>\n                          setValue(key, values[key])\n                        );\n                      })}\n                    </>\n                  )}\n                </Form>\n              ) : null;\n            }}\n            beforeConfirm={this.handleBeforeSubmit}\n            onConfirm={this.handlePropsChange}\n            title={__('SubForm.editDetail')}\n          >\n            {({onClick}) => (\n              <Button\n                disabled={disabled || !!value?.$ref}\n                className={cx('SchemaEditor-btn')}\n                onClick={onClick}\n              >\n                <Icon icon=\"setting\" className=\"icon\" />\n              </Button>\n            )}\n          </PickerContainer>\n        ) : null}\n\n        {affix}\n      </>\n    );\n  }\n\n  render() {\n    const {classnames: cx} = this.props;\n    return <div className={cx('SchemaEditorItem')}>{this.renderCommon()}</div>;\n  }\n}\n"
    ]
}
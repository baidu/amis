{
    "version": 3,
    "file": "Drawer.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/Drawer.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "/**\n * @file Drawer\n * @description\n * @author fex\n */\n\nimport React from 'react';\nimport Transition, {\n  ENTERED,\n  ENTERING,\n  EXITING,\n  EXITED\n} from 'react-transition-group/Transition';\nimport Portal from 'react-overlays/Portal';\nimport {Icon} from './icons';\nimport cx from 'classnames';\nimport {current, addModal, removeModal} from './ModalManager';\nimport {ClassNamesFn, themeable} from '../theme';\nimport {noop, autobind, getScrollbarWidth} from '../utils/helper';\n\ntype DrawerPosition = 'top' | 'right' | 'bottom' | 'left';\n\nexport interface DrawerProps {\n  className?: string;\n  bodyClassName?: string;\n  size: any;\n  overlay: boolean;\n  onHide: (e: any) => void;\n  closeOnEsc?: boolean;\n  container: any;\n  show?: boolean;\n  showCloseButton?: boolean;\n  width?: number | string;\n  height?: number | string;\n  position: DrawerPosition;\n  disabled?: boolean;\n  closeOnOutside?: boolean;\n  classPrefix: string;\n  resizable?: boolean;\n  classnames: ClassNamesFn;\n  onExited?: () => void;\n  onEntered?: () => void;\n}\nexport interface DrawerState {}\nconst fadeStyles: {\n  [propName: string]: string;\n} = {\n  [ENTERING]: 'in',\n  [ENTERED]: 'in'\n};\nexport class Drawer extends React.Component<DrawerProps, DrawerState> {\n  static defaultProps: Pick<\n    DrawerProps,\n    'container' | 'position' | 'size' | 'overlay' | 'showCloseButton'\n  > = {\n    container: document.body,\n    position: 'left',\n    size: 'md',\n    showCloseButton: true,\n    overlay: true\n  };\n\n  modalDom: HTMLElement;\n  contentDom: HTMLElement;\n  isRootClosed = false;\n  resizer = React.createRef<HTMLDivElement>();\n  resizeCoord: number = 0;\n\n  componentDidMount() {\n    if (this.props.show) {\n      this.handleEntered();\n    }\n\n    document.body.addEventListener('click', this.handleRootClickCapture, true);\n    document.body.addEventListener('click', this.handleRootClick);\n  }\n\n  componentDidUpdate(prevProps: DrawerProps) {\n    // jest 里面没有触发 entered 导致后续的逻辑错误，\n    // 所以直接 300 ms 后触发\n    if (\n      typeof jest !== 'undefined' &&\n      prevProps.show !== this.props.show &&\n      this.props.show\n    ) {\n      setTimeout(() => {\n        this.handleEntered();\n      }, 300);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.show) {\n      this.handleExited();\n    }\n\n    document.body.removeEventListener('click', this.handleRootClick);\n    document.body.removeEventListener(\n      'click',\n      this.handleRootClickCapture,\n      true\n    );\n  }\n\n  contentRef = (ref: any) => (this.contentDom = ref);\n\n  handleEnter = () => {\n    document.body.classList.add(`is-modalOpened`);\n    if (\n      window.innerWidth - document.documentElement.clientWidth > 0 ||\n      document.body.scrollHeight > document.body.clientHeight\n    ) {\n      const scrollbarWidth = getScrollbarWidth();\n      if (scrollbarWidth) {\n        document.body.style.width = `calc(100% - ${scrollbarWidth}px)`;\n      }\n    }\n  };\n\n  handleEntered = () => {\n    const onEntered = this.props.onEntered;\n    onEntered && onEntered();\n  };\n  handleExited = () => {\n    const onExited = this.props.onExited;\n    document.activeElement && (document.activeElement as HTMLElement)?.blur?.();\n    onExited && onExited();\n    setTimeout(() => {\n      if (!document.querySelector('.amis-dialog-widget')) {\n        document.body.classList.remove(`is-modalOpened`);\n        document.body.style.width = '';\n      }\n    }, 200);\n  };\n\n  modalRef = (ref: any) => {\n    this.modalDom = ref;\n    if (ref) {\n      addModal(this);\n      (ref as HTMLElement).classList.add(\n        `${this.props.classPrefix}Modal--${current()}th`\n      );\n    } else {\n      removeModal(this);\n    }\n  };\n\n  @autobind\n  handleRootClickCapture(e: MouseEvent) {\n    const target = e.target as HTMLElement;\n    const {closeOnOutside, classPrefix: ns} = this.props;\n    const isLeftButton =\n      (e.button === 1 && window.event !== null) || e.button === 0;\n\n    this.isRootClosed = !!(\n      isLeftButton &&\n      closeOnOutside &&\n      target &&\n      this.modalDom &&\n      ((!this.modalDom.contains(target) && !target.closest('[role=dialog]')) ||\n        (target.matches(`.${ns}Drawer-overlay`) &&\n          target.parentElement === this.modalDom))\n    ); // 干脆过滤掉来自弹框里面的点击\n  }\n\n  @autobind\n  handleRootClick(e: MouseEvent) {\n    const {onHide} = this.props;\n\n    this.isRootClosed && !e.defaultPrevented && onHide(e);\n  }\n\n  getDrawerStyle() {\n    const {width, height, position} = this.props;\n    const offsetStyle: {\n      width?: number | string;\n      height?: number | string;\n    } = {};\n    if ((position === 'left' || position === 'right') && width !== undefined) {\n      offsetStyle.width = width;\n    } else if (\n      (position === 'top' || position === 'bottom') &&\n      height !== undefined\n    ) {\n      offsetStyle.height = height;\n    }\n    return offsetStyle;\n  }\n\n  @autobind\n  resizeMouseDown(e: React.MouseEvent<any>) {\n    const {position, classPrefix: ns} = this.props;\n    const drawer = this.contentDom;\n    const resizer = this.resizer.current!;\n\n    const drawerWidth = getComputedStyle(drawer).width as string;\n    const drawerHeight = getComputedStyle(drawer).height as string;\n\n    this.resizeCoord =\n      (position === 'left' &&\n        e.clientX -\n          resizer.offsetWidth -\n          parseInt(drawerWidth.substring(0, drawerWidth.length - 2))) ||\n      (position === 'right' &&\n        document.body.offsetWidth -\n          e.clientX -\n          resizer.offsetWidth -\n          parseInt(drawerWidth.substring(0, drawerWidth.length - 2))) ||\n      (position === 'top' &&\n        e.clientY -\n          resizer.offsetHeight -\n          parseInt(drawerHeight.substring(0, drawerHeight.length - 2))) ||\n      (position === 'bottom' &&\n        document.body.offsetHeight -\n          e.clientY -\n          resizer.offsetHeight -\n          parseInt(drawerHeight.substring(0, drawerHeight.length - 2))) ||\n      0;\n\n    document.body.addEventListener('mousemove', this.bindResize);\n    document.body.addEventListener('mouseup', this.removeResize);\n  }\n\n  @autobind\n  bindResize(e: any) {\n    const {position} = this.props;\n    const maxWH = 'calc(100% - 50px)';\n    const drawer = this.contentDom;\n    const drawerStyle = drawer.style;\n    let wh =\n      (position === 'left' && e.clientX) ||\n      (position === 'right' && document.body.offsetWidth - e.clientX) ||\n      (position === 'top' && e.clientY) ||\n      (position === 'bottom' && document.body.offsetHeight - e.clientY) ||\n      0;\n    wh = wh - this.resizeCoord + 'px';\n\n    if (position === 'left' || position === 'right') {\n      drawerStyle.maxWidth = maxWH;\n      drawerStyle.width = wh;\n    }\n\n    if (position === 'top' || position === 'bottom') {\n      drawerStyle.maxHeight = maxWH;\n      drawerStyle.height = wh;\n    }\n  }\n\n  @autobind\n  removeResize() {\n    document.body.removeEventListener('mousemove', this.bindResize);\n    document.body.removeEventListener('mouseup', this.removeResize);\n  }\n\n  renderResizeCtrl() {\n    const {classnames: cx} = this.props;\n\n    return (\n      <div\n        className={cx('Drawer-resizeCtrl')}\n        ref={this.resizer}\n        onMouseDown={this.resizeMouseDown}\n      >\n        <div className={cx('Drawer-resizeIcon')}>···</div>\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      classPrefix: ns,\n      className,\n      children,\n      container,\n      show,\n      showCloseButton,\n      position,\n      size,\n      onHide,\n      disabled,\n      overlay,\n      bodyClassName,\n      resizable\n    } = this.props;\n\n    const bodyStyle = this.getDrawerStyle();\n\n    return (\n      <Portal container={container}>\n        <Transition\n          mountOnEnter\n          unmountOnExit\n          appear\n          in={show}\n          timeout={500}\n          onEnter={this.handleEnter}\n          onExited={this.handleExited}\n          onEntered={this.handleEntered}\n        >\n          {(status: string) => {\n            if (status === ENTERING) {\n              // force reflow\n              // 由于从 mount 进来到加上 in 这个 class 估计是时间太短，上次的样式还没应用进去，所以这里强制reflow一把。\n              // 否则看不到动画。\n              this.contentDom.offsetWidth;\n            }\n\n            return (\n              <div\n                ref={this.modalRef}\n                role=\"dialog\"\n                className={cx(\n                  `amis-dialog-widget ${ns}Drawer`,\n                  {\n                    [`${ns}Drawer--${position}`]: position,\n                    [`${ns}Drawer--${size}`]: size,\n                    [`${ns}Drawer--noOverlay`]: !overlay\n                  },\n                  className\n                )}\n                // onClick={this.handleWidgetClick} // 其实不需要插件，直接写逻辑吧\n              >\n                {overlay ? (\n                  <div\n                    className={cx(`${ns}Drawer-overlay`, fadeStyles[status])}\n                  />\n                ) : null}\n                <div\n                  ref={this.contentRef}\n                  style={bodyStyle}\n                  className={cx(\n                    `${ns}Drawer-content`,\n                    bodyClassName,\n                    fadeStyles[status]\n                  )}\n                >\n                  {show && showCloseButton ? (\n                    <a\n                      onClick={disabled ? undefined : onHide}\n                      className={`${ns}Drawer-close`}\n                    >\n                      <Icon icon=\"close\" className=\"icon\" />\n                    </a>\n                  ) : null}\n                  {status === EXITED ? null : children}\n                  {resizable ? this.renderResizeCtrl() : null}\n                </div>\n              </div>\n            );\n          }}\n        </Transition>\n      </Portal>\n    );\n  }\n}\n\nexport default themeable(Drawer);\n"
    ]
}
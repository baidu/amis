{
    "version": 3,
    "file": "Modal.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/Modal.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "/**\n * @file Modal\n * @description\n * @author fex\n */\n\nimport React from 'react';\nimport Transition, {\n  ENTERED,\n  ENTERING,\n  EXITING,\n  EXITED\n} from 'react-transition-group/Transition';\nimport Portal from 'react-overlays/Portal';\nimport {current, addModal, removeModal} from './ModalManager';\nimport {ClassNamesFn, themeable, ThemeProps} from '../theme';\nimport {Icon} from './icons';\nimport {LocaleProps, localeable} from '../locale';\nimport {autobind, getScrollbarWidth} from '../utils/helper';\n\nexport interface ModalProps extends ThemeProps, LocaleProps {\n  className?: string;\n  contentClassName?: string;\n  size?: any;\n  overlay?: boolean;\n  onHide: (e: any) => void;\n  closeOnEsc?: boolean;\n  closeOnOutside?: boolean;\n  container?: any;\n  show?: boolean;\n  disabled?: boolean;\n  onExited?: () => void;\n  onEntered?: () => void;\n}\nexport interface ModalState {}\nconst fadeStyles: {\n  [propName: string]: string;\n} = {\n  [ENTERING]: 'in',\n  [ENTERED]: 'in',\n  [EXITING]: 'out'\n};\nexport class Modal extends React.Component<ModalProps, ModalState> {\n  static defaultProps = {\n    container: document.body,\n    size: '',\n    overlay: true\n  };\n\n  isRootClosed = false;\n  modalDom: HTMLElement;\n\n  static Header = themeable(\n    localeable(\n      ({\n        classnames: cx,\n        className,\n        showCloseButton,\n        onClose,\n        children,\n        classPrefix,\n        translate: __,\n        forwardedRef,\n        ...rest\n      }: ThemeProps &\n        LocaleProps & {\n          className?: string;\n          showCloseButton?: boolean;\n          onClose?: () => void;\n          children?: React.ReactNode;\n          forwardedRef?: any;\n        } & React.HTMLAttributes<HTMLDivElement>) => (\n        <div {...rest} className={cx('Modal-header', className)}>\n          {showCloseButton !== false ? (\n            <a\n              data-tooltip={__('Dialog.close')}\n              data-position=\"left\"\n              onClick={onClose}\n              className={cx('Modal-close')}\n            >\n              <Icon icon=\"close\" className=\"icon\" />\n            </a>\n          ) : null}\n          {children}\n        </div>\n      )\n    )\n  );\n\n  static Title = themeable(\n    ({\n      classnames: cx,\n      className,\n      children,\n      classPrefix,\n      forwardedRef,\n      ...rest\n    }: ThemeProps & {\n      className?: string;\n      children?: React.ReactNode;\n      forwardedRef?: any;\n    } & React.HTMLAttributes<HTMLDivElement>) => (\n      <div {...rest} className={cx('Modal-title', className)}>\n        {children}\n      </div>\n    )\n  );\n\n  static Body = themeable(\n    ({\n      classnames: cx,\n      className,\n      children,\n      classPrefix,\n      forwardedRef,\n      ...rest\n    }: ThemeProps & {\n      className?: string;\n      children?: React.ReactNode;\n      forwardedRef?: any;\n    } & React.HTMLAttributes<HTMLDivElement>) => (\n      <div {...rest} className={cx('Modal-body', className)}>\n        {children}\n      </div>\n    )\n  );\n\n  static Footer = themeable(\n    ({\n      classnames: cx,\n      className,\n      children,\n      classPrefix,\n      forwardedRef,\n      ...rest\n    }: ThemeProps & {\n      className?: string;\n      children?: React.ReactNode;\n      forwardedRef?: any;\n    } & React.HTMLAttributes<HTMLDivElement>) => (\n      <div {...rest} className={cx('Modal-footer', className)}>\n        {children}\n      </div>\n    )\n  );\n\n  componentDidMount() {\n    if (this.props.show) {\n      this.handleEnter();\n      this.handleEntered();\n    }\n\n    document.body.addEventListener('click', this.handleRootClickCapture, true);\n    document.body.addEventListener('click', this.handleRootClick);\n  }\n\n  componentWillUnmount() {\n    if (this.props.show) {\n      this.handleExited();\n    }\n\n    document.body.removeEventListener('click', this.handleRootClick);\n    document.body.removeEventListener(\n      'click',\n      this.handleRootClickCapture,\n      true\n    );\n  }\n\n  handleEnter = () => {\n    document.body.classList.add(`is-modalOpened`);\n    if (\n      window.innerWidth - document.documentElement.clientWidth > 0 ||\n      document.body.scrollHeight > document.body.clientHeight\n    ) {\n      const scrollbarWidth = getScrollbarWidth();\n      document.body.style.width = `calc(100% - ${scrollbarWidth}px)`;\n    }\n  };\n\n  handleEntered = () => {\n    const onEntered = this.props.onEntered;\n\n    onEntered && onEntered();\n  };\n  handleExited = () => {\n    const onExited = this.props.onExited;\n    onExited && onExited();\n    setTimeout(() => {\n      if (!document.querySelector('.amis-dialog-widget')) {\n        document.body.classList.remove(`is-modalOpened`);\n        document.body.style.width = '';\n      }\n    }, 200);\n  };\n\n  modalRef = (ref: any) => {\n    this.modalDom = ref;\n    const {classPrefix: ns} = this.props;\n    if (ref) {\n      addModal(this);\n      (ref as HTMLElement).classList.add(`${ns}Modal--${current()}th`);\n    } else {\n      removeModal(this);\n    }\n  };\n\n  @autobind\n  handleRootClickCapture(e: MouseEvent) {\n    const target = e.target as HTMLElement;\n    const {closeOnOutside, classPrefix: ns} = this.props;\n    const isLeftButton =\n      (e.button === 1 && window.event !== null) || e.button === 0;\n\n    this.isRootClosed = !!(\n      isLeftButton &&\n      closeOnOutside &&\n      target &&\n      this.modalDom &&\n      ((!this.modalDom.contains(target) && !target.closest('[role=dialog]')) ||\n        (target.matches(`.${ns}Modal`) && target === this.modalDom))\n    ); // 干脆过滤掉来自弹框里面的点击\n  }\n\n  @autobind\n  handleRootClick(e: MouseEvent) {\n    const {onHide} = this.props;\n    this.isRootClosed && !e.defaultPrevented && onHide(e);\n  }\n\n  render() {\n    const {\n      className,\n      contentClassName,\n      children,\n      container,\n      show,\n      size,\n      overlay,\n      classnames: cx\n    } = this.props;\n\n    return (\n      <Transition\n        mountOnEnter\n        unmountOnExit\n        appear\n        in={show}\n        timeout={500}\n        onEnter={this.handleEnter}\n        onExited={this.handleExited}\n        onEntered={this.handleEntered}\n      >\n        {(status: string) => (\n          <Portal container={container}>\n            <div\n              ref={this.modalRef}\n              role=\"dialog\"\n              className={cx(\n                `amis-dialog-widget Modal`,\n                {\n                  [`Modal--${size}`]: size\n                },\n                className\n              )}\n            >\n              {overlay ? (\n                <div className={cx(`Modal-overlay`, fadeStyles[status])} />\n              ) : null}\n              <div\n                className={cx(\n                  `Modal-content`,\n                  contentClassName,\n                  fadeStyles[status]\n                )}\n              >\n                {status === EXITED ? null : children}\n              </div>\n            </div>\n          </Portal>\n        )}\n      </Transition>\n    );\n  }\n}\n\nconst FinalModal = themeable(localeable(Modal));\n\nexport default FinalModal as typeof FinalModal & {\n  Header: typeof Modal.Header;\n  Title: typeof Modal.Title;\n  Body: typeof Modal.Body;\n  Footer: typeof Modal.Footer;\n};\n"
    ]
}
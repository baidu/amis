{
    "version": 3,
    "file": "Badge.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/Badge.tsx"
    ],
    "names": [],
    "mappings": ";AAAA;;GAEG;;;;AAEH,6DAA0B;AAC1B,iGAA0D;AAE1D,oCAA4C;AAC5C,oDAA+E;AAE/E,wCAA0C;AAkE1C;IAA2B,sCAAmC;IAG5D,eAAY,KAAiB;eAC3B,kBAAM,KAAK,CAAC;IACd,CAAC;IAED,2BAAW,GAAX,UACE,IAAS,EACT,IAAY,EACZ,QAAa,EACb,WAAgB,EAChB,SAAc,EACd,gBAAqB;QAEf,IAAA,KAAgC,IAAI,CAAC,KAAK,EAA7B,EAAE,gBAAA,EAAE,KAAK,WAAA,EAAE,IAAI,UAAc,CAAC;QAC7C,IAAA,KAA0C,KAAoB,EAA7D,YAAY,EAAZ,IAAI,mBAAG,KAAK,KAAA,EAAE,aAAgB,EAAhB,KAAK,mBAAG,QAAQ,KAAA,EAAE,KAAK,WAAwB,CAAC;QAEnE,IAAM,WAAW,GAAG,IAAA,kBAAU,EAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAE5C,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;YACjD,KAAK,GAAG,IAAA,sCAAwB,EAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SAC/C;QAED,QAAQ,IAAI,EAAE;YACZ,KAAK,KAAK;gBACR,OAAO,CACL,wCACE,SAAS,EAAE,EAAE,CAAC,WAAW,EAAE,iBAAU,QAAQ,CAAE,EAAE,iBAAU,KAAK,CAAE,CAAC,EACnE,KAAK,wEAAM,WAAW,GAAK,SAAS,GAAK,WAAW,KAEnD,gBAAgB,CACZ,CACR,CAAC;YACJ,KAAK,MAAM;gBACT,OAAO,CACL,wCACE,SAAS,EAAE,EAAE,CACX,YAAY,EACZ,iBAAU,QAAQ,CAAE,EACpB,iBAAU,KAAK,CAAE,CAClB,EACD,KAAK,wEAAM,WAAW,GAAK,SAAS,GAAK,WAAW;oBAEnD,IAAI;oBACJ,gBAAgB,CACZ,CACR,CAAC;YACJ,KAAK,QAAQ;gBACX,IAAM,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBACxC,OAAO,CACL,uCACE,SAAS,EAAE,EAAE,CAAC,kBAAkB,EAAE,4BAAqB,QAAQ,CAAE,CAAC,EAClE,KAAK,EAAE,EAAC,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAC;oBAExC,wCACE,SAAS,EAAE,EAAE,CACX,cAAc,EACd,wBAAiB,QAAQ,CAAE,EAC3B,iBAAU,KAAK,CAAE,CAClB,EACD,KAAK,kDAAM,SAAS,GAAK,WAAW;wBAEnC,IAAI;wBACJ,gBAAgB,CACZ,CACH,CACP,CAAC;YACJ;gBACE,OAAO,IAAI,CAAC;SACf;IACH,CAAC;IAED,sBAAM,GAAN;QACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QAC/B,IAAI,CAAC,KAAK,EAAE;YACV,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;SAC5B;QACK,IAAA,KAAmC,IAAI,CAAC,KAAK,EAA5C,QAAQ,cAAA,EAAc,EAAE,gBAAA,EAAE,IAAI,UAAc,CAAC;QACpD,IAAI,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YAC7B,SAAS,GAAG,IAAA,oBAAc,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC;SAClD;QAGC,IAAA,KAWE,KAAK,KAXK,EAAZ,IAAI,mBAAG,KAAK,KAAA,EACZ,IAAI,GAUF,KAAK,KAVH,EACJ,KAAK,GASH,KAAK,MATF,EACL,IAAI,GAQF,KAAK,KARH,EACJ,KAAK,GAOH,KAAK,MAPF,EACL,MAAM,GAMJ,KAAK,OAND,EACN,KAKE,KAAK,SALe,EAAtB,QAAQ,mBAAG,WAAW,KAAA,EACtB,KAIE,KAAK,cAJW,EAAlB,aAAa,mBAAG,EAAE,KAAA,EAClB,SAAS,GAGP,KAAK,UAHE,EACT,SAAS,GAEP,KAAK,UAFE,EACT,SAAS,GACP,KAAK,UADE,CACD;QAEV,IAAI,SAAS,EAAE;YACb,SAAS,GAAG,IAAA,oBAAc,EAAC,SAAS,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC;SACtD;QAED,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;YAC/C,IAAI,GAAG,IAAA,sCAAwB,EAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC7C;QAED,QAAQ;QACR,IAAI,OAAO,IAAI,KAAK,WAAW,EAAE;YAC/B,IAAI,IAAI,KAAK,KAAK,EAAE;gBAClB,IAAI,GAAG,CAAC,CAAC;aACV;iBAAM,IAAI,IAAI,KAAK,QAAQ,EAAE;gBAC5B,IAAI,GAAG,EAAE,CAAC;aACX;iBAAM;gBACL,IAAI,GAAG,EAAE,CAAC;aACX;SACF;QAED,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,IAAI,IAAI,KAAK,MAAM,EAAE;YACnB,SAAS,GAAG;gBACV,YAAY,EAAE,IAAI,GAAG,CAAC;gBACtB,MAAM,EAAE,IAAI;gBACZ,UAAU,EAAE,IAAI,GAAG,IAAI;aACxB,CAAC;YACF,yCAAyC;YACzC,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,OAAO,aAAa,KAAK,QAAQ,EAAE;gBACjE,IAAI,GAAG,CACJ,IAAe,GAAI,aAAwB;oBAC1C,CAAC,CAAC,UAAG,aAAa,MAAG;oBACrB,CAAC,CAAC,IAAI,CACU,CAAC;aACtB;YAED,IAAI,CAAC,IAAI,EAAE;gBACT,SAAS,GAAG,KAAK,CAAC;aACnB;SACF;QAED,IAAI,IAAI,KAAK,KAAK,EAAE;YAClB,SAAS,GAAG,EAAC,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAC,CAAC;SACzC;QAED,IAAI,IAAI,KAAK,QAAQ,EAAE;YACrB,SAAS,GAAG;gBACV,MAAM,EAAE,IAAI;gBACZ,UAAU,EAAE,IAAI,GAAG,IAAI;gBACvB,QAAQ,EAAE,IAAI;aACf,CAAC;SACH;QAED,IAAI,WAAW,GAAG,EAAE,CAAC;QACrB,6DAA6D;QAC7D,IAAI,MAAM,IAAI,MAAM,CAAC,MAAM,EAAE;YAC3B,QAAQ,GAAG,WAAW,CAAC;YACvB,IAAM,IAAI,GAAG,qBAAc,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAW,EAAE,EAAE,CAAC,QAAK,CAAC;YAClE,IAAM,KAAK,GAAG,sBAAe,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAW,EAAE,EAAE,CAAC,QAAK,CAAC;YACpE,WAAW,GAAG;gBACZ,SAAS,EAAE,oBAAa,IAAI,eAAK,KAAK,MAAG;aAC1C,CAAC;SACH;QAED,IAAI,mBAAmB,GAAG,eAAe,CAAC;QAE1C,IAAI,KAAK,IAAI,KAAK,CAAC,UAAU,EAAE;YAC7B,mBAAmB,GAAG,KAAK,CAAC,UAAU,CAAC;SACxC;QAED,IAAM,gBAAgB,GAAG,SAAS,CAAC,CAAC,CAAC,CACnC,uCACE,KAAK,EAAE;gBACL,QAAQ,EAAE,UAAU;gBACpB,GAAG,EAAE,CAAC;gBACN,IAAI,EAAE,CAAC;gBACP,KAAK,EAAE,MAAM;gBACb,MAAM,EAAE,MAAM;gBACd,MAAM,EAAE,oBAAa,mBAAmB,CAAE;gBAC1C,YAAY,EAAE,KAAK;gBACnB,SAAS,EAAE,6CAA6C;aACzD,GACI,CACR,CAAC,CAAC,CAAC,IAAI,CAAC;QAET,OAAO,CACL,uCAAK,SAAS,EAAE,EAAE,CAAC,OAAO,EAAE,SAAS,CAAC;YACnC,QAAQ;YACR,SAAS;gBACR,CAAC,CAAC,IAAI,CAAC,WAAW,CACd,IAAI,EACJ,IAAI,EACJ,QAAQ,EACR,WAAW,EACX,SAAS,EACT,gBAAgB,CACjB;gBACH,CAAC,CAAC,IAAI,CACJ,CACP,CAAC;IACJ,CAAC;IApMM,eAAS,GAAkB,CAAC,MAAM,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC;IAqMtE,YAAC;CAAA,AAtMD,CAA2B,eAAK,CAAC,SAAS,GAsMzC;AAtMY,sBAAK;AAwMlB,SAAgB,SAAS,CAAmB,SAAiC;;IAC3E,OAAO,IAAA,iCAAmB;YACA,0CAA+B;YAAvD;;YAkBA,CAAC;YAbC,0BAAM,GAAN;gBACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;gBAE/B,IAAI,CAAC,KAAK,EAAE;oBACV,OAAO,8BAAC,SAAS,4BAAM,IAAI,CAAC,KAAW,EAAI,CAAC;iBAC7C;gBAED,OAAO,CACL,8BAAC,KAAK,4BAAM,IAAI,CAAC,KAAoB;oBACnC,8BAAC,SAAS,4BAAM,IAAI,CAAC,KAAW,EAAI,CAC9B,CACT,CAAC;YACJ,CAAC;YACH,gBAAC;QAAD,CAAC,AAlBD,CAAwB,eAAK,CAAC,SAAS;QAC9B,cAAW,GAAG,oBACnB,SAAS,CAAC,WAAW,IAAI,SAAS,CAAC,IAAI,MACrC;aAgBN,SAAS,CACV,CAAC;AACJ,CAAC;AAvBD,8BAuBC",
    "sourcesContent": [
        "/**\n * @file 角标组件\n */\n\nimport React from 'react';\nimport hoistNonReactStatic from 'hoist-non-react-statics';\nimport {BaseSchema, SchemaExpression} from '../Schema';\nimport {evalExpression} from '../utils/tpl';\nimport {resolveVariable, resolveVariableAndFilter} from '../utils/tpl-builtin';\nimport {ClassNamesFn} from '../theme';\nimport {buildStyle} from '../utils/style';\n\n/**\n * Badge 角标。\n * 文档：https://baidu.gitee.io/amis/docs/components/badge\n */\nexport interface BadgeSchema extends Omit<BaseSchema, 'type'> {\n  /**\n   * 文本内容\n   */\n  text?: string | number;\n\n  /**\n   * 大小\n   */\n  size?: number;\n\n  /**\n   * 角标类型\n   */\n  mode?: 'text' | 'dot' | 'ribbon';\n\n  /**\n   * 角标位置，优先级大于position\n   */\n  offset?: [number | string, number | string];\n\n  /**\n   * 角标位置\n   */\n  position?: 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left';\n\n  /**\n   * 封顶的数字值\n   */\n  overflowCount?: number;\n\n  /**\n   * 动态控制是否显示\n   */\n  visibleOn?: SchemaExpression;\n\n  /**\n   * 是否显示动画\n   */\n  animation?: boolean;\n\n  /**\n   * 角标的自定义样式\n   */\n  style?: {\n    [propName: string]: any;\n  };\n\n  /**\n   * 提示类型\n   */\n  level?: 'info' | 'warning' | 'success' | 'danger' | SchemaExpression;\n}\n\nexport interface BadgeProps {\n  badge?: BadgeSchema;\n  classnames: ClassNamesFn;\n  data: any;\n}\n\nexport class Badge extends React.Component<BadgeProps, object> {\n  static propsList: Array<string> = ['body', 'className', 'children'];\n\n  constructor(props: BadgeProps) {\n    super(props);\n  }\n\n  renderBadge(\n    text: any,\n    size: number,\n    position: any,\n    offsetStyle: any,\n    sizeStyle: any,\n    animationElement: any\n  ) {\n    const {classnames: cx, badge, data} = this.props;\n    let {mode = 'dot', level = 'danger', style} = badge as BadgeSchema;\n\n    const customStyle = buildStyle(style, data);\n\n    if (typeof level === 'string' && level[0] === '$') {\n      level = resolveVariableAndFilter(level, data);\n    }\n\n    switch (mode) {\n      case 'dot':\n        return (\n          <span\n            className={cx('Badge-dot', `Badge--${position}`, `Badge--${level}`)}\n            style={{...offsetStyle, ...sizeStyle, ...customStyle}}\n          >\n            {animationElement}\n          </span>\n        );\n      case 'text':\n        return (\n          <span\n            className={cx(\n              'Badge-text',\n              `Badge--${position}`,\n              `Badge--${level}`\n            )}\n            style={{...offsetStyle, ...sizeStyle, ...customStyle}}\n          >\n            {text}\n            {animationElement}\n          </span>\n        );\n      case 'ribbon':\n        const outSize = size * Math.sqrt(2) + 5;\n        return (\n          <div\n            className={cx('Badge-ribbon-out', `Badge-ribbon-out--${position}`)}\n            style={{width: outSize, height: outSize}}\n          >\n            <span\n              className={cx(\n                'Badge-ribbon',\n                `Badge-ribbon--${position}`,\n                `Badge--${level}`\n              )}\n              style={{...sizeStyle, ...customStyle}}\n            >\n              {text}\n              {animationElement}\n            </span>\n          </div>\n        );\n      default:\n        return null;\n    }\n  }\n\n  render() {\n    const badge = this.props.badge;\n    if (!badge) {\n      return this.props.children;\n    }\n    const {children, classnames: cx, data} = this.props;\n    let isDisplay = true;\n    if (typeof badge === 'string') {\n      isDisplay = evalExpression(badge, data) === true;\n    }\n\n    let {\n      mode = 'dot',\n      text,\n      level,\n      size,\n      style,\n      offset,\n      position = 'top-right',\n      overflowCount = 99,\n      visibleOn,\n      className,\n      animation\n    } = badge;\n\n    if (visibleOn) {\n      isDisplay = evalExpression(visibleOn, data) === true;\n    }\n\n    if (typeof text === 'string' && text[0] === '$') {\n      text = resolveVariableAndFilter(text, data);\n    }\n\n    // 设置默认值\n    if (typeof size === 'undefined') {\n      if (mode === 'dot') {\n        size = 6;\n      } else if (mode === 'ribbon') {\n        size = 12;\n      } else {\n        size = 16;\n      }\n    }\n\n    let sizeStyle = {};\n    if (mode === 'text') {\n      sizeStyle = {\n        borderRadius: size / 2,\n        height: size,\n        lineHeight: size + 'px'\n      };\n      // 当text、overflowCount都为number类型时，进行封顶值处理\n      if (typeof text === 'number' && typeof overflowCount === 'number') {\n        text = (\n          (text as number) > (overflowCount as number)\n            ? `${overflowCount}+`\n            : text\n        ) as string | number;\n      }\n\n      if (!text) {\n        isDisplay = false;\n      }\n    }\n\n    if (mode === 'dot') {\n      sizeStyle = {width: size, height: size};\n    }\n\n    if (mode === 'ribbon') {\n      sizeStyle = {\n        height: size,\n        lineHeight: size + 'px',\n        fontSize: size\n      };\n    }\n\n    let offsetStyle = {};\n    // 如果设置了offset属性，offset在position为'top-right'的基础上进行translate定位\n    if (offset && offset.length) {\n      position = 'top-right';\n      const left = `calc(50% + ${parseInt(offset[0] as string, 10)}px)`;\n      const right = `calc(-50% + ${parseInt(offset[1] as string, 10)}px)`;\n      offsetStyle = {\n        transform: `translate(${left}, ${right})`\n      };\n    }\n\n    let animationBackground = 'var(--danger)';\n\n    if (style && style.background) {\n      animationBackground = style.background;\n    }\n\n    const animationElement = animation ? (\n      <div\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          border: `1px solid ${animationBackground}`,\n          borderRadius: '50%',\n          animation: 'badgeDotAnimation 1.2s infinite ease-in-out'\n        }}\n      ></div>\n    ) : null;\n\n    return (\n      <div className={cx('Badge', className)}>\n        {children}\n        {isDisplay\n          ? this.renderBadge(\n              text,\n              size,\n              position,\n              offsetStyle,\n              sizeStyle,\n              animationElement\n            )\n          : null}\n      </div>\n    );\n  }\n}\n\nexport function withBadge<P extends object>(Component: React.ComponentType<P>) {\n  return hoistNonReactStatic(\n    class WithBadge extends React.Component<P & BadgeProps> {\n      static displayName = `WithBadge(${\n        Component.displayName || Component.name\n      })`;\n\n      render() {\n        const badge = this.props.badge;\n\n        if (!badge) {\n          return <Component {...(this.props as P)} />;\n        }\n\n        return (\n          <Badge {...(this.props as BadgeProps)}>\n            <Component {...(this.props as P)} />\n          </Badge>\n        );\n      }\n    },\n    Component\n  );\n}\n"
    ]
}
{
    "version": 3,
    "file": "Object.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/json-schema/Object.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {guid} from '../../utils/helper';\nimport Button from '../Button';\nimport {Icon} from '../icons';\nimport InputBox from '../InputBox';\nimport InputBoxWithSuggestion from '../InputBoxWithSuggestion';\nimport Select from '../Select';\nimport type {InputJSONSchemaItemProps} from './index';\nimport {InputJSONSchemaItem} from './Item';\n\ntype JSONSchemaObjectMember = {\n  key: string;\n  name: string;\n  nameMutable?: boolean;\n  schema?: any;\n  invalid?: boolean;\n  required?: boolean;\n};\nexport function InputJSONSchemaObject(props: InputJSONSchemaItemProps) {\n  const {\n    classnames: cx,\n    value,\n    onChange,\n    disabled,\n    translate: __,\n    renderKey,\n    collapsable,\n    renderValue\n  } = props;\n  const buildMembers = React.useCallback((schema: any, value: any) => {\n    const members: Array<JSONSchemaObjectMember> = [];\n    const required = Array.isArray(schema.required) ? schema.required : [];\n\n    Object.keys(schema.properties || {}).forEach(key => {\n      const child = schema.properties[key];\n      members.push({\n        key: guid(),\n        name: key,\n        nameMutable: !required.includes(key),\n        required: required.includes(key),\n        schema: child\n      });\n    });\n\n    const keys = Object.keys(value || {});\n    for (let key of keys) {\n      const exists = members.find(m => m.name === key);\n      if (!exists) {\n        members.push({\n          key: guid(),\n          name: key,\n          nameMutable: true,\n          schema: {\n            type: 'string'\n          }\n        });\n      }\n    }\n\n    if (!members.length) {\n      members.push({\n        key: guid(),\n        name: '',\n        nameMutable: true,\n        schema: {\n          type: 'string'\n        }\n      });\n    }\n\n    return members;\n  }, []);\n\n  const [members, setMembers] = React.useState<Array<JSONSchemaObjectMember>>(\n    buildMembers(props.schema, props.value)\n  );\n  const membersRef = React.useRef<Array<JSONSchemaObjectMember>>();\n  membersRef.current = members;\n\n  const [collapsed, setCollapsed] = React.useState<boolean>(\n    collapsable ? true : false\n  );\n  const toggleCollapsed = () => {\n    setCollapsed(!collapsed);\n  };\n\n  const onMemberChange = (member: JSONSchemaObjectMember, memberValue: any) => {\n    const newValue = {\n      ...props.value,\n      [member.name]: memberValue\n    };\n    onChange?.(newValue);\n  };\n  const onMemberKeyChange = (\n    member: JSONSchemaObjectMember,\n    memberValue: any\n  ) => {\n    const idx = members.indexOf(member);\n    if (!~idx) {\n      throw new Error('member object not found');\n    }\n\n    const newValue = {\n      ...props.value\n    };\n    const m = members.concat();\n    m.splice(idx, 1, {\n      ...member,\n      schema: props.schema?.properties?.[memberValue] || {\n        type: 'string'\n      },\n      name: memberValue,\n      invalid:\n        !memberValue ||\n        members.some((a, b) => a.name === memberValue && b !== idx)\n    });\n\n    setMembers(m);\n\n    newValue[memberValue] = newValue[member.name];\n    delete newValue[member.name];\n    onChange?.(newValue);\n  };\n  const onMemberDelete = (member: JSONSchemaObjectMember) => {\n    const idx = members.indexOf(member);\n    if (!~idx) {\n      throw new Error('member object not found');\n    }\n\n    const m = members.concat();\n    m.splice(idx, 1);\n    setMembers(m);\n\n    const newValue = {\n      ...props.value\n    };\n    delete newValue[member.name];\n    onChange?.(newValue);\n  };\n\n  React.useEffect(() => {\n    setMembers(buildMembers(props.schema, props.value));\n  }, [JSON.stringify(props.schema)]);\n\n  React.useEffect(() => {\n    const value = props.value;\n    const m = membersRef.current!.concat();\n    const keys = Object.keys(value || {});\n    for (let key of keys) {\n      const exists = m.find(m => m.name === key);\n      if (!exists) {\n        m.push({\n          key: guid(),\n          name: key,\n          nameMutable: true,\n          schema: {\n            type: 'string'\n          }\n        });\n      }\n    }\n    if (m.length !== membersRef.current!.length) {\n      setMembers(m);\n    }\n  }, [JSON.stringify(props.value)]);\n\n  const handleAdd = React.useCallback(() => {\n    const m = members.concat();\n    m.push({\n      key: guid(),\n      name: '',\n      invalid: true,\n      nameMutable: true\n    });\n    setMembers(m);\n  }, [members]);\n\n  const options: Array<any> = [];\n  const properties: any = props.schema?.properties || {};\n  Object.keys(properties).forEach(key => {\n    options.push({\n      label: properties[key]?.title || key,\n      value: key\n    });\n  });\n  // todo additionalProperties 还有其他格式\n  const allowAdd = !(\n    props.schema.additionalProperties === false &&\n    options.every(o => members.find(m => m.name === o.value))\n  );\n  const allowInput = props.schema.additionalProperties !== false;\n\n  return (\n    <>\n      {collapsable ? (\n        <a\n          className={cx('JSONSchemaObject-caret', {\n            'is-collapsed': collapsed\n          })}\n          onClick={toggleCollapsed}\n        >\n          <Icon icon=\"caret\" className=\"icon\" />\n        </a>\n      ) : null}\n\n      <div\n        className={cx('JSONSchemaObject', {\n          'is-expanded': collapsable && !collapsed\n        })}\n      >\n        {collapsed ? (\n          renderValue ? (\n            <InputJSONSchemaItem\n              {...props}\n              value={value}\n              onChange={onChange}\n              schema={{\n                type: 'string'\n              }}\n              placeholder={props.schema?.description}\n            />\n          ) : null\n        ) : (\n          members.map(member => {\n            const filtedOptions = options.filter(\n              o => !members.find(m => m !== member && m.name === o.value)\n            );\n\n            return (\n              <div key={member.key} className={cx('JSONSchemaMember')}>\n                <div className={cx('JSONSchemaMember-key')}>\n                  {member.nameMutable ? (\n                    <>\n                      {renderKey ? (\n                        renderKey(\n                          member.name,\n                          onMemberKeyChange.bind(null, member),\n                          member.schema,\n                          props\n                        )\n                      ) : filtedOptions.length ? (\n                        allowInput ? (\n                          <InputBoxWithSuggestion\n                            value={member.name}\n                            hasError={member.invalid}\n                            onChange={onMemberKeyChange.bind(null, member)}\n                            clearable={false}\n                            placeholder={__('JSONSchema.key')}\n                            options={filtedOptions}\n                          />\n                        ) : (\n                          <Select\n                            simpleValue\n                            block\n                            value={member.name}\n                            hasError={member.invalid}\n                            onChange={onMemberKeyChange.bind(null, member)}\n                            clearable={false}\n                            placeholder={__('JSONSchema.key')}\n                            options={filtedOptions}\n                          />\n                        )\n                      ) : (\n                        <InputBox\n                          value={member.name}\n                          hasError={member.invalid}\n                          onChange={onMemberKeyChange.bind(null, member)}\n                          clearable={false}\n                          placeholder={__('JSONSchema.key')}\n                        />\n                      )}\n                    </>\n                  ) : (\n                    <span>\n                      {member.required ? (\n                        <span className={cx(`Form-star`)}>*</span>\n                      ) : null}\n                      {member.schema?.title || member.name}\n\n                      {/* {member.schema?.description ? (\n                        <TooltipWrapper\n                          tooltipTheme=\"dark\"\n                          tooltip={member.schema.description}\n                          trigger=\"click\"\n                          rootClose\n                        >\n                          <div className={cx(`Remark`, `Remark--warning`)}>\n                            <span className={cx('Remark-icon icon')}>\n                              <Icon icon=\"question-mark\" />\n                            </span>\n                          </div>\n                        </TooltipWrapper>\n                      ) : null} */}\n                    </span>\n                  )}\n                </div>\n                <div className={cx('JSONSchemaMember-value')}>\n                  <InputJSONSchemaItem\n                    {...props}\n                    value={value?.[member.name]}\n                    onChange={onMemberChange.bind(null, member)}\n                    schema={\n                      member.schema || {\n                        type: 'string'\n                      }\n                    }\n                    placeholder={member.schema?.description}\n                    collapsable\n                  />\n                </div>\n                {!member.required ? (\n                  <Button\n                    className={cx('SchemaEditor-btn')}\n                    onClick={onMemberDelete.bind(null, member)}\n                    iconOnly\n                    disabled={disabled || !!value?.$ref}\n                  >\n                    <Icon icon=\"remove\" className=\"icon\" />\n                  </Button>\n                ) : null}\n              </div>\n            );\n          })\n        )}\n\n        {allowAdd && !collapsed ? (\n          <Button\n            level=\"link\"\n            onClick={handleAdd}\n            size=\"xs\"\n            disabled={disabled}\n          >\n            {__('JSONSchema.add_prop')}\n          </Button>\n        ) : null}\n      </div>\n    </>\n  );\n}\n"
    ]
}
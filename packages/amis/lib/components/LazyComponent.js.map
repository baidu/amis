{
    "version": 3,
    "file": "LazyComponent.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/LazyComponent.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "/**\n * @file LazyComponent\n * @description\n * @author fex\n */\n\nimport React from 'react';\nimport VisibilitySensor from 'react-visibility-sensor';\nimport Spinner from './Spinner';\n\nexport interface LazyComponentProps {\n  component?: React.ReactType;\n  getComponent?: () => Promise<React.ReactType>;\n  placeholder?: React.ReactNode;\n  unMountOnHidden?: boolean;\n  childProps?: object;\n  visiblilityProps?: object;\n  [propName: string]: any;\n}\n\nexport interface LazyComponentState {\n  visible: boolean;\n  component?: React.ReactType;\n}\n\nexport default class LazyComponent extends React.Component<\n  LazyComponentProps,\n  LazyComponentState\n> {\n  static defaultProps = {\n    placeholder: <Spinner />,\n    unMountOnHidden: false,\n    partialVisibility: true\n  };\n\n  mounted: boolean = false;\n  constructor(props: LazyComponentProps) {\n    super(props);\n\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n    this.mounted = true;\n\n    this.state = {\n      visible: false,\n      component: props.component as React.ReactType\n    };\n  }\n\n  componentDidMount() {\n    // jest 里面有点异常，先手动让它总是可见\n    if (typeof jest !== 'undefined') {\n      this.handleVisibleChange(true);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleVisibleChange(visible: boolean) {\n    this.setState({\n      visible: visible\n    });\n\n    if (!visible || this.state.component || !this.props.getComponent) {\n      return;\n    }\n\n    this.props\n      .getComponent()\n      .then(\n        component =>\n          this.mounted &&\n          typeof component === 'function' &&\n          this.setState({\n            component: component\n          })\n      )\n      .catch(\n        reason =>\n          this.mounted &&\n          this.setState({\n            component: () => (\n              <div className=\"alert alert-danger\">{String(reason)}</div>\n            )\n          })\n      );\n  }\n\n  render() {\n    const {\n      placeholder,\n      unMountOnHidden,\n      childProps,\n      visiblilityProps,\n      partialVisibility,\n      children,\n      ...rest\n    } = this.props;\n\n    const {visible, component: Component} = this.state;\n\n    // 需要监听从可见到不可见。\n    if (unMountOnHidden) {\n      return (\n        <VisibilitySensor\n          {...visiblilityProps}\n          partialVisibility={partialVisibility}\n          onChange={this.handleVisibleChange}\n        >\n          <div className=\"visibility-sensor\">\n            {Component && visible ? (\n              <Component {...rest} {...childProps} />\n            ) : children && visible ? (\n              children\n            ) : (\n              placeholder\n            )}\n          </div>\n        </VisibilitySensor>\n      );\n    }\n\n    if (!visible) {\n      return (\n        <VisibilitySensor\n          {...visiblilityProps}\n          partialVisibility={partialVisibility}\n          onChange={this.handleVisibleChange}\n        >\n          <div className=\"visibility-sensor\">{placeholder}</div>\n        </VisibilitySensor>\n      );\n    } else if (Component) {\n      // 只监听不可见到可见，一旦可见了，就销毁检查。\n      return <Component {...rest} {...childProps} />;\n    } else if (children) {\n      return children;\n    }\n\n    return <div>{placeholder}</div>;\n  }\n}\n"
    ]
}
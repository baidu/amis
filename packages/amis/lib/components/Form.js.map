{
    "version": 3,
    "file": "Form.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/Form.tsx"
    ],
    "names": [],
    "mappings": ";;;;AAAA;;GAEG;AACH,6DAA0B;AAC1B,kCAA+C;AAC/C,mDAAuD;AACvD,4EAAuE;AACvE,oCAAkD;AAgBlD,SAAgB,IAAI,CAAC,KAAgB;;IAC5B,IAAY,EAAE,GAAI,KAAK,WAAT,CAAU;IAC/B,IAAM,OAAO,GAAG,IAAA,yBAAO,EAAC;QACtB,aAAa,EAAE,KAAK,CAAC,aAAa;QAClC,QAAQ,EAAE,IAAA,+CAAqB,EAAC,KAAK,CAAC,SAAS,CAAC;KACjD,CAAC,CAAC;IAEH,eAAK,CAAC,SAAS,CAAC;QACd,IAAI,KAAK,CAAC,UAAU,EAAE;YACpB,0BAA0B;YAC1B,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG;gBACzB,MAAM,EAAE;oBACN,OAAA,IAAI,OAAO,CAAM,UAAC,OAAO,EAAE,MAAM;wBAC/B,OAAO,CAAC,YAAY,CAClB,UAAA,MAAM,IAAI,OAAA,OAAO,CAAC,MAAM,CAAC,EAAf,CAAe,EACzB,cAAM,OAAA,OAAO,CAAC,KAAK,CAAC,EAAd,CAAc,CACrB,EAAE,CAAC;oBACN,CAAC,CAAC;gBALF,CAKE;aACL,CAAC;SACH;QAED,OAAO;YACL,IAAI,KAAK,CAAC,UAAU,EAAE;gBACpB,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,SAAS,CAAC;aACtC;QACH,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,OAAO,CACL,wCACE,SAAS,EAAE,EAAE,CAAC,MAAM,CAAC,EACrB,QAAQ,EAAE,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,EAC9C,UAAU;QAGV,yCAAO,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAE,EAAC,OAAO,EAAE,MAAM,EAAC,GAAI,EAChD,MAAA,KAAK,CAAC,QAAQ;gBAAd,KAAK,EAAY,OAAO,CAAC,CACrB,CACR,CAAC;AACJ,CAAC;AAvCD,oBAuCC;AAED,IAAM,UAAU,GAAG,IAAA,iBAAS,EAAC,IAAA,mBAAU,EAAC,IAAI,CAAC,CAAC,CAAC;AAG/C,kBAAe,eAAK,CAAC,UAAU,CAAC,UAAC,KAAsB,EAAE,GAAY,IAAK,OAAA,CACxE,8BAAC,UAAU,4BAAK,KAAK,IAAE,UAAU,EAAE,GAAG,IAAI,CAC3C,EAFyE,CAEzE,CAAC,CAAC",
    "sourcesContent": [
        "/**\n * @file 给组件用的，渲染器里面不要用这个\n */\nimport React from 'react';\nimport {themeable, ThemeProps} from '../theme';\nimport {useForm, UseFormReturn} from 'react-hook-form';\nimport {useValidationResolver} from '../hooks/use-validation-resolver';\nimport {localeable, LocaleProps} from '../locale';\n\nexport type FormRef = React.MutableRefObject<\n  | {\n      submit: () => void;\n    }\n  | undefined\n>;\n\nexport interface FormProps extends ThemeProps, LocaleProps {\n  defaultValues: any;\n  onSubmit: (value: any) => void;\n  forwardRef?: FormRef;\n  children?: (methods: UseFormReturn) => JSX.Element | null;\n}\n\nexport function Form(props: FormProps) {\n  const {classnames: cx} = props;\n  const methods = useForm({\n    defaultValues: props.defaultValues,\n    resolver: useValidationResolver(props.translate)\n  });\n\n  React.useEffect(() => {\n    if (props.forwardRef) {\n      // 这个模式别的组件没见到过不知道后续会不会不允许\n      props.forwardRef.current = {\n        submit: () =>\n          new Promise<any>((resolve, reject) => {\n            methods.handleSubmit(\n              values => resolve(values),\n              () => resolve(false)\n            )();\n          })\n      };\n    }\n\n    return () => {\n      if (props.forwardRef) {\n        props.forwardRef.current = undefined;\n      }\n    };\n  });\n\n  return (\n    <form\n      className={cx('Form')}\n      onSubmit={methods.handleSubmit(props.onSubmit)}\n      noValidate\n    >\n      {/* 实现回车自动提交 */}\n      <input type=\"submit\" style={{display: 'none'}} />\n      {props.children?.(methods)}\n    </form>\n  );\n}\n\nconst ThemedForm = themeable(localeable(Form));\ntype ThemedFormProps = Omit<FormProps, keyof ThemeProps | keyof LocaleProps>;\n\nexport default React.forwardRef((props: ThemedFormProps, ref: FormRef) => (\n  <ThemedForm {...props} forwardRef={ref} />\n));\n"
    ]
}
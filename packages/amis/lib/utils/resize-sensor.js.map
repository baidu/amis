{
    "version": 3,
    "file": "resize-sensor.js",
    "sourceRoot": "",
    "sources": [
        "/src/utils/resize-sensor.ts"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "/**\n * @file resize-sensor.js.\n * @author fex\n */\n\nclass EventQueue {\n  q: Array<Function> = [];\n\n  add(cb: Function) {\n    this.q.push(cb);\n  }\n\n  call(...args: Array<any>) {\n    this.q.forEach(fn => {\n      fn(...args);\n    });\n  }\n}\n\nexport function getComputedStyle(element: HTMLElement, prop: string) {\n  if ((element as any).currentStyle) {\n    return (element as any).currentStyle[prop];\n  } else if (window.getComputedStyle) {\n    const style = window.getComputedStyle(element, undefined);\n    return style ? style.getPropertyValue(prop) : undefined;\n  } else {\n    return element.style[prop as any];\n  }\n}\n\nfunction attachResizeEvent(element: HTMLElement, resized: () => void) {\n  if (!element) {\n    return;\n  }\n  if (!(element as any).resizedAttached) {\n    (element as any).resizedAttached = new EventQueue();\n    (element as any).resizedAttached.add(resized);\n  } else if ((element as any).resizedAttached) {\n    (element as any).resizedAttached.add(resized);\n    return;\n  }\n\n  const resizeSensor = ((element as any).resizeSensor =\n    document.createElement('div'));\n  resizeSensor.className = 'resize-sensor';\n  let style =\n    'position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;';\n  let styleChild = 'position: absolute; left: 0; top: 0;';\n\n  resizeSensor.style.cssText = style;\n  resizeSensor.innerHTML = `\n  <div class=\"resize-sensor-expand\" style=\"${style}\">\n    <div style=\"${styleChild}\"></div>\n  </div>\n  <div class=\"resize-sensor-shrink\" style=\"${style}\">\n    <div style=\"${styleChild} width: 200%; height: 200%\"></div>\n  </div>\n  <div class=\"resize-sensor-appear\" style=\"${style}animation-name: apearSensor; animation-duration: 0.2s;\"></div>`;\n  // 要定义 resizeSensor 这个动画，靠这个监听出现。\n  element.appendChild(resizeSensor);\n  (element as any).hasInlineStyle = element.hasAttribute('style');\n  const position = ((element as any).originPosition = getComputedStyle(\n    element,\n    'position'\n  ));\n  if (!~['fixed', 'absolute'].indexOf(position)) {\n    element.style.position = 'relative';\n  }\n\n  const expand = resizeSensor.children[0] as HTMLElement;\n  const expandChild = expand.children[0] as HTMLElement;\n  const shrink = resizeSensor.children[1] as HTMLElement;\n  // let shrinkChild = shrink.children[0] as HTMLElement;\n  const appear = resizeSensor.children[2] as HTMLElement;\n\n  let lastWidth: number, lastHeight: number;\n\n  const reset = function () {\n    expandChild.style.width = expand.offsetWidth + 10 + 'px';\n    expandChild.style.height = expand.offsetHeight + 10 + 'px';\n    expand.scrollLeft = expand.scrollWidth;\n    expand.scrollTop = expand.scrollHeight;\n    shrink.scrollLeft = shrink.scrollWidth;\n    shrink.scrollTop = shrink.scrollHeight;\n    lastWidth = element.offsetWidth;\n    lastHeight = element.offsetHeight;\n  };\n\n  const appeared = function () {\n    reset();\n\n    // 如果初始是隐藏状态，首次显示也触发resize事件。\n    if (isHidden) {\n      changed();\n      isHidden = false;\n    }\n  };\n\n  reset();\n\n  let changed = function () {\n    if ((element as any).resizedAttached) {\n      (element as any).resizedAttached.call();\n    }\n  };\n\n  let addEvent = function (el: HTMLElement, name: string, cb: Function) {\n    if ((el as any).attachEvent) {\n      (el as any).attachEvent('on' + name, cb);\n    } else {\n      el.addEventListener(name, cb as any);\n    }\n  };\n\n  let removeEvent = function (el: HTMLElement, name: string, cb: Function) {\n    if ((el as any).detachEvent) {\n      (el as any).detachEvent('on' + name, cb);\n    } else {\n      el.removeEventListener(name, cb as any);\n    }\n  };\n\n  let onScroll = function (e: Event) {\n    if (\n      element.offsetWidth != lastWidth ||\n      element.offsetHeight != lastHeight\n    ) {\n      changed();\n    }\n    reset();\n  };\n\n  addEvent(expand, 'scroll', onScroll);\n  addEvent(shrink, 'scroll', onScroll);\n  addEvent(appear, 'animationstart', appeared);\n  let isHidden = !expand.offsetWidth;\n\n  return () => {\n    removeEvent(expand, 'scroll', onScroll);\n    removeEvent(shrink, 'scroll', onScroll);\n    removeEvent(appear, 'animationstart', appeared);\n  };\n}\n\nfunction detach(element: HTMLElement) {\n  if ((element as any).resizeSensor) {\n    if ((element as any).hasInlineStyle) {\n      element.style.position = (element as any).originPosition;\n    } else {\n      element.removeAttribute('style');\n    }\n    try {\n      element.removeChild((element as any).resizeSensor);\n    } catch (e) {}\n    delete (element as any).resizeSensor;\n    delete (element as any).resizedAttached;\n    delete (element as any).hasInlineStyle;\n    delete (element as any).originPosition;\n  }\n}\n\nexport function resizeSensor(\n  element: HTMLElement,\n  callback: () => void\n): () => void;\nexport function resizeSensor(\n  element: HTMLElement,\n  callback: () => void,\n  once: boolean = false\n) {\n  if (!element) {\n    return () => {};\n  }\n\n  let disposeEvent: (() => void) | undefined = undefined;\n\n  if (once) {\n    disposeEvent = attachResizeEvent(element, function (this: any) {\n      callback.apply(this, arguments);\n      disposeEvent?.();\n      detach(element);\n    });\n    return;\n  }\n\n  disposeEvent = attachResizeEvent(element, callback);\n  let detached = false;\n\n  return function () {\n    if (detached) return;\n    detached = true;\n    disposeEvent?.();\n    detach(element);\n  };\n}\n"
    ]
}
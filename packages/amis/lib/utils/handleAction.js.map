{
    "version": 3,
    "file": "handleAction.js",
    "sourceRoot": "",
    "sources": [
        "/src/utils/handleAction.ts"
    ],
    "names": [],
    "mappings": ";AAAA;;GAEG;;AAIH,6BAAiD;AAEjD,SAAwB,YAAY,CAClC,CAAwB,EACxB,MAAoB,EACpB,KAAoB,EACpB,IAAU;IAEV,qDAAqD;IACrD,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,0CAA0C;IAEvD,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;IAChC,IAAI,OAAO,GAAQ,MAAM,CAAC,OAAO,CAAC;IAElC,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;QAC/B,OAAO,GAAG,IAAA,kBAAY,EAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;KAC3D;IACD,IAAM,MAAM,GAAQ,OAAO,IAAI,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC;IAErE,IAAI,CAAC,CAAC,kBAAkB,EAAE,IAAI,MAAM,KAAK,KAAK,IAAI,CAAC,QAAQ,EAAE;QAC3D,OAAO;KACR;IAED,CAAC,CAAC,cAAc,EAAE,CAAC;IAEnB,wBAAwB;IACxB,IAAI,MAAM,CAAC,UAAU,KAAK,UAAU,EAAE;QACpC,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC;QAC3B,IAAM,GAAG,GAAG,IAAA,kBAAY,EAAE,MAA2B,CAAC,GAAG,CAAC,CAAC;QAC3D,GAAG,CAAC,YAAY,GAAG,MAAM,CAAC;QACzB,MAA2B,CAAC,GAAG,GAAG,GAAG,CAAC;KACxC;IAED,QAAQ,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC;AAC1C,CAAC;AAhCD,+BAgCC",
    "sourcesContent": [
        "/**\n * 后续好多地方可能都要支持 action，所以提取公共功能\n */\n\nimport {RendererProps} from '../factory';\nimport {ActionSchema, AjaxActionSchema} from '../renderers/Action';\nimport {normalizeApi, str2function} from './api';\n\nexport default function handleAction(\n  e: React.MouseEvent<any>,\n  action: ActionSchema,\n  props: RendererProps,\n  data?: any\n) {\n  // https://reactjs.org/docs/legacy-event-pooling.html\n  e.persist(); // 等 react 17之后去掉 event pooling 了，这个应该就没用了\n\n  const onAction = props.onAction;\n  let onClick: any = action.onClick;\n\n  if (typeof onClick === 'string') {\n    onClick = str2function(onClick, 'event', 'props', 'data');\n  }\n  const result: any = onClick && onClick(e, props, data || props.data);\n\n  if (e.isDefaultPrevented() || result === false || !onAction) {\n    return;\n  }\n\n  e.preventDefault();\n\n  // download 是一种 ajax 的简写\n  if (action.actionType === 'download') {\n    action.actionType = 'ajax';\n    const api = normalizeApi((action as AjaxActionSchema).api);\n    api.responseType = 'blob';\n    (action as AjaxActionSchema).api = api;\n  }\n\n  onAction(e, action, data || props.data);\n}\n"
    ]
}
---
title: è¡¨è¾¾å¼
description:
type: 0
group: ğŸ’¡ æ¦‚å¿µ
menuName: è¡¨è¾¾å¼
icon:
order: 13
---

## ä½¿ç”¨åœºæ™¯

amis ä¸­æœ‰å¾ˆå¤šåœºæ™¯ä¼šç”¨åˆ°è¡¨è¾¾å¼ã€‚

- æ¨¡æ¿ä¸­å˜é‡å–å€¼ã€‚ å¦‚ï¼š`my name is ${xxx}`
- api åœ°å€å‚æ•°å–å€¼ å¦‚ `http://mydomain.com/api/xxx?id=${id}`
- api å‘é€&æ¥æ”¶æ•°æ®æ˜ å°„

  ```
  {
    "type": "crud",
    "api": {
      method: "post"
      url: "http://mydomain.com/api/xxx",
      data: {
        skip: "${(page - 1) * perPage}",
        take: "${perPage}"
      }
    },
    ...
  }
  ```

- ç»„ä»¶æ˜¾ç¤ºä¸éšè—æ¡ä»¶

  ```
  {
    "name": "xxxText",
    "type": "input-text",
    "visibleOn": "${ xxxFeature.on }"
  }
  ```

- è¡¨å•é»˜è®¤å€¼

  ```
  {
    "name": "xxxText",
    "type": "input-text",
    "value": "${ TODAY() }"
  }
  ```

- ç­‰ç­‰

amis ä¸­è¡¨è¾¾å¼æœ‰ä¸¤ç§è¯­æ³•ï¼š

- ä¸€ç§æ˜¯çº¯ js è¡¨è¾¾å¼ï¼Œå¦‚ `data.xxx === 1`ã€‚
- å¦ä¸€ç§æ˜¯ç”¨ `${` å’Œ `}` åŒ…è£¹çš„è¡¨è¾¾å¼ã€‚å¦‚ï¼š`${ xxx === 1}`ã€‚

```json
{
  "type": "tpl",
  "tpl": "å½“å‰ä½œç”¨åŸŸä¸­å˜é‡ show æ˜¯ 1 çš„æ—¶å€™æ‰å¯ä»¥çœ‹å¾—åˆ°æˆ‘å“¦~",
  "visibleOn": "${show === 1}"
}
```

ç¬¬ä¸€ç§æ˜¯æ—©æœŸçš„ç‰ˆæœ¬ï¼Œå·æ‡’ç›´æ¥ç”¨çš„ [Javascript](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript)ï¼Œçµæ´»æ€§è™½é«˜ï¼Œä½†æ˜¯å®‰å…¨æ€§æ¬ ä½³ã€‚å»ºè®®ä½¿ç”¨æ–°ç‰ˆæœ¬è§„åˆ™ï¼Œæ–°è§„åˆ™è·Ÿ tpl æ¨¡æ¿å–å€¼è§„åˆ™å®Œå…¨ä¸€æ ·ï¼Œä¸ç”¨æ¥å›åˆ‡æ¢è¯­æ³•ã€‚

## è¡¨è¾¾å¼è¯­æ³•

è¡¨è¾¾å¼ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šå¼€å§‹å­—ç¬¦ã€è¡¨è¾¾å¼å†…å®¹å’Œç»“æŸå­—ç¬¦ã€‚å…¶ä¸­å¼€å§‹å­—ç¬¦å›ºå®šæ˜¯ `${` ç»“æŸå­—ç¬¦å›ºå®šæ˜¯ `}`ï¼Œä¸­é—´å†…å®¹æ‰æ˜¯è¡¨è¾¾å¼æ­£æ–‡ã€‚è¿™é‡Œè¯´çš„è¯­æ³•ä¸»è¦è¿˜æ˜¯è¡¨è¾¾å¼æ­£æ–‡çš„è¯­æ³•ã€‚

è§„åˆ™ä¸»è¦åŒ…å«ï¼š

- å˜é‡åï¼š `xxxå˜é‡`ã€`xxxå˜é‡.xxxå±æ€§`ã€`xxxå˜é‡[xxxå±æ€§]`
- å¸ƒå°”å€¼ï¼š `true` æˆ–è€… `false`
- æ•°å­—ï¼š `123` æˆ–è€… `123.23`
- å­—ç¬¦ä¸²ï¼š `"string"` æˆ–è€… `'string'`
- å­—ç¬¦æ¨¡æ¿

  ```
  `my name is ${name}`
  ```

- æ•°ç»„ï¼š `[1, 2, 3]`
- å¯¹è±¡ï¼š `{a: 1, b: 2}`
- ç»„åˆä½¿ç”¨å¦‚ï¼š `{a: 1: b: [1, 2, 3], [key]: yyyå˜é‡}`
- ä¸‰å…ƒè¡¨è¾¾å¼ï¼š `xxå˜é‡ == 1 ? 2 : 3`
- äºŒå…ƒè¡¨è¾¾å¼ï¼š `xxå˜é‡ && yy å˜é‡` ã€ `xxå˜é‡ || yy å˜é‡`ã€ `xxå˜é‡ == 123`

  - `+` ç›¸åŠ 
  - `-` ç›¸å‡
  - `*` ä¹˜
  - `/` é™¤
  - `**` pow è¿ç®—
  - `||` æˆ–è€…
  - `&&` å¹¶ä¸”
  - `|` æˆ–è¿ç®—
  - `^` å¼‚æˆ–è¿ç®—
  - `&` ä¸è¿ç®—
  - `==` ç­‰äºæ¯”è¾ƒ
  - `!=` ä¸ç­‰äº
  - `===` æ’ç­‰äº
  - `!==` ä¸æ’ç­‰äº
  - `<` å°äº
  - `<=` å°äºæˆ–ç­‰äº
  - `>` å¤§äº
  - `>=` å¤§äºæˆ–ç­‰äº
  - `<<` å·¦ç§»
  - `>>` å³ç§»
  - `>>>` å¸¦ç¬¦å·ä½çš„å³ç§»è¿ç®—ç¬¦

- ä¸€å…ƒè¡¨è¾¾å¼ï¼š `!xxå˜é‡`ã€`~xxå˜é‡`

* `+` ä¸€å…ƒåŠ æ³•
* `-` ä¸€å…ƒå‡æ³•
* `~` å¦è¿ç®—ç¬¦ï¼ŒåŠ  1 å–å
* `!` å–å

- å‡½æ•°è°ƒç”¨ï¼š`SUM(1, 2, 3)`
- ç®­å¤´å‡½æ•°ï¼š`() => abc` æ³¨æ„è¿™ä¸ªç®­å¤´å‡½æ•°åªæ”¯æŒå•è¡¨è¾¾å¼ï¼Œä¸æ”¯æŒå¤šæ¡è¯­å¥ã€‚ä¸»è¦é…ç½®å…¶ä»–å‡½æ•°ä½¿ç”¨å¦‚ï¼š`ARRAY_MAP(arr, item => item.abc)`
- æ‹¬å·åŒ…è£¹ï¼Œä¿®æ”¹è¿ç®—ä¼˜å…ˆçº§ï¼š`(10 - 2) * 3`

ç¤ºä¾‹ï¼š

```schema
{
  "type": "page",
  "data": {
    "a": 1,
    "key": "y",
    "obj": {
      "x": 2,
      "y": 3
    },
    "arr": [1, 2, 3]
  },
  "body": [
    "a is ${a} <br />",
    "a + 1 is ${a + 1} <br />",
    "obj.x is ${obj.x} <br />",
    "obj['x'] is ${obj['x']} <br />",
    "obj[key] is ${obj[key]} <br />",
    "arr[0] is ${arr[0]} <br />",
    "arr[a] is ${arr[a]} <br />",
    "arr[a + 1] is ${arr[a + 1]} <br />"
  ]
}
```

_ç‰¹æ®Šå­—ç¬¦å˜é‡å_

> 1.6.1 åŠä»¥ä¸Šç‰ˆæœ¬

é»˜è®¤å˜é‡åä¸æ”¯æŒç‰¹æ®Šå­—ç¬¦æ¯”å¦‚ `${ xxx.yyy }` æ„æ€å– xxx å˜é‡çš„ yyy å±æ€§ï¼Œå¦‚æœå˜é‡åå°±æ˜¯ `xxx.yyy` æ€ä¹ˆè·å–ï¼Ÿè¿™ä¸ªæ—¶å€™éœ€è¦ç”¨åˆ°è½¬ä¹‰è¯­æ³•ï¼Œå¦‚ï¼š`${ xxx\.yyy }`

### å…¬å¼

é™¤äº†æ”¯æŒç®€å•è¡¨è¾¾å¼å¤–ï¼Œè¿˜é›†æˆäº†å¾ˆå¤šå…¬å¼(å‡½æ•°)å¦‚ `${ AVG(1, 2, 3, 4)}`ï¼š

```schema
{
  "type": "page",
  "data": {
    "a": "",
    "è¯­æ–‡æˆç»©": 81
  },
  "body": [
    "1, 2, 3, 4 çš„å¹³å‡æ•°ä½ ${ AVG(1, 2, 3, 4)}",

    "å½“å‰æˆç»©ï¼š${IF(è¯­æ–‡æˆç»© > 80, 'ä¼˜ç§€', 'ç»§ç»­åŠªåŠ›')}"
  ]
}
```

## å‡½æ•°è°ƒç”¨ç¤ºä¾‹

å‡½æ•°æ”¯æŒåµŒå¥—ï¼Œå‚æ•°æ”¯æŒå¸¸é‡åŠå˜é‡

```schema
{
  "type": "page",
  "body": [
    {
      "type": "form",
      "wrapWithPanel": false,
      "data": {
        "val": 3.5
      },
      "body": [
        {
          "type": "static",
          "label": "IF(true, 2, 3)",
          "tpl": "${IF(true, 2, 3)}"
        },
        {
          "type": "static",
          "label": "MAX(1, -1, 2, 3, 5, -9)",
          "tpl": "${MAX(1, -1, 2, 3, 5, -9)}"
        },
        {
          "type": "static",
          "label": "ROUND(3.5)",
          "tpl": "${ROUND(3.5)}"
        },
        {
          "type": "static",
          "label": "ROUND(val)",
          "tpl": "${ROUND(val)}"
        },
        {
          "type": "static",
          "label": "AVG(4, 6, 10, 10, 10)",
          "tpl": "${AVG(4, 6, 10, 10, 10)}"
        },
        {
          "type": "static",
          "label": "UPPERMONEY(7682.01)",
          "tpl": "${UPPERMONEY(7682.01)}"
        },
        {
          "type": "static",
          "label": "TIMESTAMP(DATE(2021, 11, 21, 0, 0, 0), 'x')",
          "tpl": "${TIMESTAMP(DATE(2021, 11, 21, 0, 0, 0), 'x')}"
        },
        {
          "type": "static",
          "label": "DATETOSTR(NOW(), 'YYYY-MM-DD')",
          "tpl": "${DATETOSTR(NOW(), 'YYYY-MM-DD')}"
        }
      ]
    }
  ]
}
```

ä¸‹é¢æ˜¯ç›®å‰æ‰€æ”¯æŒå‡½æ•°çš„ä½¿ç”¨æ‰‹å†Œ

!!!include(amis-formula/lib/doc.md)!!!

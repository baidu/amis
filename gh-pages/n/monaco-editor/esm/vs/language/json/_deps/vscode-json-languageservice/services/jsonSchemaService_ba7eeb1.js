define("node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonSchemaService",function(e,t){"use strict";function r(e){try{var t=o.default.parse(e);if("file"===t.scheme)return t.fsPath}catch(r){}return e}Object.defineProperty(t,"__esModule",{value:!0});var s=e("node_modules/tslib/tslib"),n=s.__importStar(e("node_modules/monaco-editor/esm/vs/language/json/_deps/jsonc-parser/main")),o=s.__importDefault(e("node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-uri/index")),i=s.__importStar(e("node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/utils/strings")),a=s.__importStar(e("node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-json-languageservice/parser/jsonParser")),c=s.__importStar(e("node_modules/monaco-editor/esm/vs/language/json/fillers/vscode-nls")),h=c.loadMessageBundle(),u=function(){function e(e){try{this.patternRegExp=new RegExp(i.convertSimple2RegExpPattern(e)+"$")}catch(t){this.patternRegExp=null}this.schemas=[]}return e.prototype.addSchema=function(e){this.schemas.push(e)},e.prototype.matchesPattern=function(e){return this.patternRegExp&&this.patternRegExp.test(e)},e.prototype.getSchemas=function(){return this.schemas},e}(),l=function(){function e(e,t,r){this.service=e,this.url=t,this.dependencies={},r&&(this.unresolvedSchema=this.service.promise.resolve(new d(r)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then(function(t){return e.service.resolveSchemaContent(t,e.url,e.dependencies)})),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=null,this.unresolvedSchema=null,this.dependencies={}},e}(),d=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e}();t.UnresolvedSchema=d;var m=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){return a.asSchema(this.getSectionRecursive(e,this.schema))},e.prototype.getSectionRecursive=function(e,t){if(!t||"boolean"==typeof t||0===e.length)return t;var r=e.shift();if(t.properties)return this.getSectionRecursive(e,t.properties[r]);if(t.patternProperties)for(var s=0,n=Object.keys(t.patternProperties);s<n.length;s++){var o=n[s],i=new RegExp(o);if(i.test(r))return this.getSectionRecursive(e,t.patternProperties[o])}else{if("object"==typeof t.additionalProperties)return this.getSectionRecursive(e,t.additionalProperties);if(r.match("[0-9]+"))if(Array.isArray(t.items)){var a=parseInt(r,10);if(!isNaN(a)&&t.items[a])return this.getSectionRecursive(e,t.items[a])}else if(t.items)return this.getSectionRecursive(e,t.items)}return null},e}();t.ResolvedSchema=m;var f=function(){function e(e,t,r){this.contextService=t,this.requestService=e,this.promiseConstructor=r||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations={},this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={},this.registeredSchemasIds={}}return e.prototype.getRegisteredSchemaIds=function(e){return Object.keys(this.registeredSchemasIds).filter(function(t){var r=o.default.parse(t).scheme;return"schemaservice"!==r&&(!e||e(r))})},Object.defineProperty(e.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){var t=this,r=!1;e=this.normalizeId(e);for(var s=[e],n=Object.keys(this.schemasById).map(function(e){return t.schemasById[e]});s.length;)for(var o=s.pop(),i=0;i<n.length;i++){var a=n[i];a&&(a.url===o||a.dependencies[o])&&(a.url!==o&&s.push(a.url),a.clearSchema(),n[i]=void 0,r=!0)}return r},e.prototype.normalizeId=function(e){return o.default.parse(e).toString()},e.prototype.setSchemaContributions=function(e){if(e.schemas){var t=e.schemas;for(var r in t){var s=this.normalizeId(r);this.contributionSchemas[s]=this.addSchemaHandle(s,t[r])}}if(e.schemaAssociations){var n=e.schemaAssociations;for(var o in n){var i=n[o];this.contributionAssociations[o]=i;for(var a=this.getOrAddFilePatternAssociation(o),c=0,h=i;c<h.length;c++){var u=h[c],r=this.normalizeId(u);a.addSchema(r)}}}},e.prototype.addSchemaHandle=function(e,t){var r=new l(this,e,t);return this.schemasById[e]=r,r},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.getOrAddFilePatternAssociation=function(e){var t=this.filePatternAssociationById[e];return t||(t=new u(e),this.filePatternAssociationById[e]=t,this.filePatternAssociations.push(t)),t},e.prototype.registerExternalSchema=function(e,t,r){void 0===t&&(t=null);var s=this.normalizeId(e);if(this.registeredSchemasIds[s]=!0,t)for(var n=0,o=t;n<o.length;n++){var i=o[n];this.getOrAddFilePatternAssociation(i).addSchema(s)}return r?this.addSchemaHandle(s,r):this.getOrAddSchemaHandle(s)},e.prototype.clearExternalSchemas=function(){this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={},this.registeredSchemasIds={};for(var e in this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e],this.registeredSchemasIds[e]=!0;for(var t in this.contributionAssociations)for(var r=this.getOrAddFilePatternAssociation(t),s=0,n=this.contributionAssociations[t];s<n.length;s++){var o=n[s],e=this.normalizeId(o);r.addSchema(e)}},e.prototype.getResolvedSchema=function(e){var t=this.normalizeId(e),r=this.schemasById[t];return r?r.getResolvedSchema():this.promise.resolve(null)},e.prototype.loadSchema=function(e){if(!this.requestService){var t=h("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",r(e));return this.promise.resolve(new d({},[t]))}return this.requestService(e).then(function(t){if(!t){var s=h("json.schema.nocontent","Unable to load schema from '{0}': No content.",r(e));return new d({},[s])}var o={},i=[];o=n.parse(t,i);var a=i.length?[h("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",r(e),i[0].offset)]:[];return new d(o,a)},function(e){var t=e.toString(),r=e.toString().split("Error: ");return r.length>1&&(t=r[1]),new d({},[t])})},e.prototype.resolveSchemaContent=function(e,t,r){var s=this,n=e.errors.slice(0),o=e.schema,i=this.contextService,a=function(e,t){if(!t)return e;var r=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some(function(e){return r=r[e],!r}),r},c=function(e,t,r,s){var o=a(t,s);if(o)for(var i in o)o.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=o[i]);else n.push(h("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",s,r))},u=function(e,t,r,o,a){i&&!/^\w+:\/\/.*/.test(t)&&(t=i.resolveRelativePath(t,o)),t=s.normalizeId(t);var u=s.getOrAddSchemaHandle(t);return u.getUnresolvedSchema().then(function(s){if(a[t]=!0,s.errors.length){var o=r?t+"#"+r:t;n.push(h("json.schema.problemloadingref","Problems loading reference '{0}': {1}",o,s.errors[0]))}return c(e,s.schema,t,r),l(e,s.schema,t,u.dependencies)})},l=function(e,t,r,n){if(!e||"object"!=typeof e)return Promise.resolve(null);for(var o=[e],i=[],a=[],h=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,s=e;r<s.length;r++){var n=s[r];"object"==typeof n&&o.push(n)}},l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,s=e;r<s.length;r++){var n=s[r];if("object"==typeof n)for(var i in n){var a=n[i];"object"==typeof a&&o.push(a)}}},d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,s=e;r<s.length;r++){var n=s[r];if(Array.isArray(n))for(var i=0,a=n;i<a.length;i++){var c=a[i];"object"==typeof c&&o.push(c)}}},m=function(e){for(var s=[];e.$ref;){var o=e.$ref,i=o.split("#",2);if(delete e.$ref,i[0].length>0)return void a.push(u(e,i[0],i[1],r,n));-1===s.indexOf(o)&&(c(e,t,r,i[1]),s.push(o))}h(e.items,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),l(e.definitions,e.properties,e.patternProperties,e.dependencies),d(e.anyOf,e.allOf,e.oneOf,e.items)};o.length;){var f=o.pop();i.indexOf(f)>=0||(i.push(f),m(f))}return s.promise.all(a)};return l(o,o,t,r).then(function(){return new m(o,n)})},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var r=t.root.properties.filter(function(e){return"$schema"===e.keyNode.value&&e.valueNode&&"string"===e.valueNode.type});if(r.length>0){var s=a.getNodeValue(r[0].valueNode);if(s&&i.startsWith(s,".")&&this.contextService&&(s=this.contextService.resolveRelativePath(s,e)),s){var n=this.normalizeId(s);return this.getOrAddSchemaHandle(n).getResolvedSchema()}}}for(var o=Object.create(null),c=[],h=0,u=this.filePatternAssociations;h<u.length;h++){var l=u[h];if(l.matchesPattern(e))for(var d=0,m=l.getSchemas();d<m.length;d++){var f=m[d];o[f]||(c.push(f),o[f]=!0)}}return c.length>0?this.createCombinedSchema(e,c).getResolvedSchema():this.promise.resolve(null)},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.getOrAddSchemaHandle(t[0]);var r="schemaservice://combinedSchema/"+encodeURIComponent(e),s={allOf:t.map(function(e){return{$ref:e}})};return this.addSchemaHandle(r,s)},e}();t.JSONSchemaService=f});